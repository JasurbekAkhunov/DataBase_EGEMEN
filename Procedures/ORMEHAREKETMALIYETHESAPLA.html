<HTML>
<HEAD>
<TITLE>ORMEHAREKETMALIYETHESAPLA</TITLE>
<META content="text/html; charset=utf-8" http-equiv=Content-Type>
<LINK HREF="../IBEHTMLDoc.css" type=text/css rel=STYLESHEET>
 
<xml>
<IBEHelp:Attr Name="ItemOrder" Value="1246800"/>
</xml>
 
</HEAD>
<BODY>
<DIV ID="nsbanner">
  <DIV ID="bannerrow1">
    <TABLE CLASS="bannerparthead" CELLSPACING=0>
      <TR ID="hdr" VALIGN="middle">
        <TD CLASS="runninghead">"E:\Egemen\EB01\Dataserver\DATA\FERGANAGLOBAL\EB01DATA.GDB". Procedures</TD>
        <TD ALIGN="left" WIDTH="54px" NOWRAP>
          <A HREF="ORMEHAMSTOKSONALISFIYATI_V2.html"><IMG ALT="Previous topic" SRC="../Images/GoPrev.gif" BORDER="0"></A>
          <A HREF="../Index.html"><IMG ALT="Chapter index" SRC="../Images/GoIndex.gif" BORDER="0"></A>
          <A HREF="ORMEIPLIKFIRERAPORU_1.html"><IMG ALT="Next topic" SRC="../Images/GoNext.gif" BORDER="0"></A>
        </TD>
      </TR>
    </TABLE>
  </DIV>
  <DIV ID="TitleRow">
    <P CLASS="dtH1">ORMEHAREKETMALIYETHESAPLA</P>
  </DIV>
 </DIV>
<P CLASS="Base">&nbsp;</P>
<P CLASS="Header1">Input Parameters</P>
<TABLE CLASS="dtArg" CELLSPACING="0">
  <TH WIDTH="1%"><P CLASS="Base2"><B>Parameter</B></P>
  <TH WIDTH="20%"><P CLASS="Base2"><B>Type</B></P>
  <TH WIDTH="50%"><P CLASS="Base2"><B>Description</B></P>
  <TR>
    <TD><P CLASS="Base2">ABASLANGICTARIHI</TD>
    <TD><P CLASS="Base2">TIMESTAMP</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ABITISTARIHI</TD>
    <TD><P CLASS="Base2">TIMESTAMP</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">AHAMID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
</TABLE>
<P CLASS="Base">&nbsp;</P>
<P CLASS="Header1">Output Parameters</P>
<TABLE CLASS="dtArg" CELLSPACING="0">
  <TH WIDTH="1%"><P CLASS="Base2"><B>Parameter</B></P>
  <TH WIDTH="20%"><P CLASS="Base2"><B>Type</B></P>
  <TH WIDTH="50%"><P CLASS="Base2"><B>Description</B></P>
  <TR>
    <TD><P CLASS="Base2">SAYAC</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">FIRMAID</TD>
    <TD><P CLASS="Base2">VARCHAR(20)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">FIRMAADI</TD>
    <TD><P CLASS="Base2">VARCHAR(100)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">STOKHAREKETID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">TARIH</TD>
    <TD><P CLASS="Base2">TIMESTAMP</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMESIPARISDETAYID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BOYASIPARISKAYITID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BOYASIPARISYIL</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BOYASIPARISID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAREKETTIPIID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAREKETIPIADI</TD>
    <TD><P CLASS="Base2">VARCHAR(30)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URETIMISLEMTIPIID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URETIMISLEMTIPIADI</TD>
    <TD><P CLASS="Base2">VARCHAR(15)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMIADE</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">GIRISCIKIS</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMERAFID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">YENIORMERAFID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMADI</TD>
    <TD><P CLASS="Base2">VARCHAR(255)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMTIPIID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMTIPIADI</TD>
    <TD><P CLASS="Base2">VARCHAR(20)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">LOT</TD>
    <TD><P CLASS="Base2">VARCHAR(150)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">RENKID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">RENKADI</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MIKTARBIRIM</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BRUTMIKTAR</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MIKTAR</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">RAFSTOKMIKTARI</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BIRIMFIYAT</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">DOVIZID</TD>
    <TD><P CLASS="Base2">VARCHAR(5)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BIRIMFIYATSISTEMDOVIZ</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BIRIMMALIYET</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">TABANDOVIZKURU1</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">TABANDOVIZKURU2</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BOYAIRSALIYEDETAYID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PARTIKAYITID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PARTISINIFID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PARTIYIL</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PARTIID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSHAMSTOKMALIYETI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSGUGPAYITUTARI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSELEKTRIKPAYITUTARI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSDOGALGAZPAYITUTARI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSBUHARPAYITUTARI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSSUPAYITUTARI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSISCILIKPAYITUTARI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSBOYAMALIYETI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSKIMYASALMALIYETI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSBOYAKIMYASALMALIYETI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSTOPLAMMALIYET</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PSKGMALIYETI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMEPLANLAMAID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URETIMPARTINO</TD>
    <TD><P CLASS="Base2">VARCHAR(30)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMEFISID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMEFISNO</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMEFISTARIH</TD>
    <TD><P CLASS="Base2">TIMESTAMP</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMEIRSALIYEID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMEIRSALIYENO</TD>
    <TD><P CLASS="Base2">NUMERIC(18,0)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMEIRSALIYETARIH</TD>
    <TD><P CLASS="Base2">TIMESTAMP</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMERAFTRANSFERFISID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMERAFTRANSFERFISIDETAYID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMERAFTRANSFERFISYIL</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMERAFTRANSFERFISNO</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMERAFTRANSFERFISTARIH</TD>
    <TD><P CLASS="Base2">TIMESTAMP</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">IPLIKKULLANIMORANI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">IPLIKMALIYETI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">LIKRAKULLANIMORANI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">LIKRAMALIYETI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPARISTAHMINIFIREORANI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMMALIYETI</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">YAZILACAKBIRIMMALIYET</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MALIYETSISTEMDOVIZ</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MALIYETSISTEMDOVIZSTR</TD>
    <TD><P CLASS="Base2">VARCHAR(2048)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORTALAMAMALIYETSISTEMDOVIZ</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">STOKHAREKETKALANKILO</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BOYAHANECIKISHAMSTOKMASTERID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMSTOKFATURAID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMSTOKFATURANO</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMSTOKFATURAENTEGRASYON</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ORMESTOKKAYDIRMAID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URETIMECIKANIPLIKKILO</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URETIMECIKANIPLIKMALIYETI</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URETIMECIKANLIKRAKILO</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URETIMECIKANLIKRAMALIYETI</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMRECETEDETAYSAYISI</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMRECETEORANTOPLAMI</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
</TABLE>
<P CLASS="Base">&nbsp;</P>
<P CLASS="Header1">Description</P>
<P CLASS="Base"><I>(There is no description for procedure ORMEHAREKETMALIYETHESAPLA)</I></P>
<P CLASS="Base">&nbsp;</P>
<P CLASS="Header1">Definition</P>
<P CLASS="Base"><span class="DDLCode">
<code><pre>
<b>CREATE</b><b> </b><b>PROCEDURE</b><b> </b><font color="# 080 0"><u>ORMEHAREKETMALIYETHESAPLA</u></font><b>(</b>
<b>    </b>ABASLANGICTARIHI<b> </b><b>TIMESTAMP</b><b>,</b>
<b>    </b>ABITISTARIHI<b> </b><b>TIMESTAMP</b><b>,</b>
<b>    </b>AHAMID<b> </b><b>INTEGER</b><b>)</b>
<b>RETURNS</b><b> </b><b>(</b>
<b>    </b>SAYAC<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>FIRMAID<b> </b><b>VARCHAR</b><b>(</b>20<b>)</b><b>,</b>
<b>    </b>FIRMAADI<b> </b><b>VARCHAR</b><b>(</b>100<b>)</b><b>,</b>
<b>    </b>STOKHAREKETID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>TARIH<b> </b><b>TIMESTAMP</b><b>,</b>
<b>    </b>ORMESIPARISDETAYID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>BOYASIPARISKAYITID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>BOYASIPARISYIL<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>BOYASIPARISID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAREKETTIPIID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAREKETIPIADI<b> </b><b>VARCHAR</b><b>(</b>30<b>)</b><b>,</b>
<b>    </b>URETIMISLEMTIPIID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>URETIMISLEMTIPIADI<b> </b><b>VARCHAR</b><b>(</b>15<b>)</b><b>,</b>
<b>    </b>HAMIADE<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>GIRISCIKIS<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMERAFID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>YENIORMERAFID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAMID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAMADI<b> </b><b>VARCHAR</b><b>(</b>255<b>)</b><b>,</b>
<b>    </b>HAMTIPIID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAMTIPIADI<b> </b><b>VARCHAR</b><b>(</b>20<b>)</b><b>,</b>
<b>    </b>LOT<b> </b><b>VARCHAR</b><b>(</b>150<b>)</b><b>,</b>
<b>    </b>RENKID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>RENKADI<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>MIKTARBIRIM<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>BRUTMIKTAR<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>,</b>
<b>    </b>MIKTAR<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>,</b>
<b>    </b>RAFSTOKMIKTARI<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>,</b>
<b>    </b>BIRIMFIYAT<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>DOVIZID<b> </b><b>VARCHAR</b><b>(</b>5<b>)</b><b>,</b>
<b>    </b>BIRIMFIYATSISTEMDOVIZ<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>BIRIMMALIYET<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>TABANDOVIZKURU1<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>TABANDOVIZKURU2<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>BOYAIRSALIYEDETAYID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>PARTIKAYITID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>PARTISINIFID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>PARTIYIL<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>PARTIID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>PSHAMSTOKMALIYETI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSGUGPAYITUTARI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSELEKTRIKPAYITUTARI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSDOGALGAZPAYITUTARI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSBUHARPAYITUTARI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSSUPAYITUTARI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSISCILIKPAYITUTARI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSBOYAMALIYETI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSKIMYASALMALIYETI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSBOYAKIMYASALMALIYETI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSTOPLAMMALIYET<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>PSKGMALIYETI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>ORMEPLANLAMAID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>URETIMPARTINO<b> </b><b>VARCHAR</b><b>(</b>30<b>)</b><b>,</b>
<b>    </b>ORMEFISID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMEFISNO<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMEFISTARIH<b> </b><b>TIMESTAMP</b><b>,</b>
<b>    </b>ORMEIRSALIYEID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMEIRSALIYENO<b> </b><font color="# 080 0"><u>IRSALIYENOSIZE</u></font><b>,</b>
<b>    </b>ORMEIRSALIYETARIH<b> </b><b>TIMESTAMP</b><b>,</b>
<b>    </b>ORMERAFTRANSFERFISID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMERAFTRANSFERFISIDETAYID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMERAFTRANSFERFISYIL<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMERAFTRANSFERFISNO<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMERAFTRANSFERFISTARIH<b> </b><b>TIMESTAMP</b><b>,</b>
<b>    </b>IPLIKKULLANIMORANI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>IPLIKMALIYETI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>LIKRAKULLANIMORANI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>LIKRAMALIYETI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>SIPARISTAHMINIFIREORANI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>HAMMALIYETI<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>YAZILACAKBIRIMMALIYET<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>MALIYETSISTEMDOVIZ<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>MALIYETSISTEMDOVIZSTR<b> </b><b>VARCHAR</b><b>(</b>2048<b>)</b><b>,</b>
<b>    </b>ORTALAMAMALIYETSISTEMDOVIZ<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>STOKHAREKETKALANKILO<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>,</b>
<b>    </b>BOYAHANECIKISHAMSTOKMASTERID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAMSTOKFATURAID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAMSTOKFATURANO<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAMSTOKFATURAENTEGRASYON<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ORMESTOKKAYDIRMAID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>URETIMECIKANIPLIKKILO<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>,</b>
<b>    </b>URETIMECIKANIPLIKMALIYETI<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>,</b>
<b>    </b>URETIMECIKANLIKRAKILO<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>,</b>
<b>    </b>URETIMECIKANLIKRAMALIYETI<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>,</b>
<b>    </b>HAMRECETEDETAYSAYISI<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAMRECETEORANTOPLAMI<b> </b><b>NUMERIC</b><b>(</b>12<b>,</b>3<b>)</b><b>)</b>
<b>AS</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>FHamId<b>                         </b><b>Integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>FOrmerafid<b>                     </b><b>Integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Ormefirmaid<b>                    </b><b>Varchar</b><b>(</b>20<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Sistemdovizid<b>                  </b><b>Varchar</b><b>(</b>5<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Fhamtipleri<b>                    </b><b>Varchar</b><b>(</b>20<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Ormerafgirisfiyatlariid<b>        </b><b>Integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>ORGFtarih<b>                      </b><b>Timestamp</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>ORGFkilo<b>                       </b><b>Numeric</b><b>(</b>12<b>,</b>3<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>ORGFBirimFiyat<b>                 </b><b>Double</b><b> </b><b>Precision</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>ORGFKalankilo<b>                  </b><b>Numeric</b><b>(</b>12<b>,</b>3<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Fkilo<b>                          </b><b>Numeric</b><b>(</b>12<b>,</b>3<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Fmetre<b>                         </b><b>Numeric</b><b>(</b>12<b>,</b>3<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Fhamtipiid<b>                     </b><b>Integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Fcikankilo<b>                     </b><b>Numeric</b><b>(</b>12<b>,</b>3<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Fcikanmaliyeti<b>                 </b><b>Numeric</b><b>(</b>12<b>,</b>3<b>)</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>FRafGirisindeMaliyetiEsitle<b>    </b><b>Integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>FORafBirimMaliyetTakibiOlmasin<b> </b><b>Integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>Fstokkaydirmagirishareketid<b>    </b><b>Integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>FSiparisMaliyetTakibiVar<b>       </b><b>integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>FHamReceteHamId<b>                </b><b>integer</b><b>;</b>
<b>Declare</b><b> </b><b>Variable</b><b> </b>FHamReceteKullanimOrani<b>        </b><b>integer</b><b>;</b>
<b>Begin</b>
<b>  </b><b>Select</b><b> </b>RafGirisindeMaliyetiEsitle<b>,</b><b> </b>ORafBirimMaliyetTakibiOlmasin<b>,</b><b> </b>SiparisMaliyetTakibiVar<b>,</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>Ormefirmakodumuz<b>,</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>Sistemdovizid
<b>    </b><b>From</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b> </b><b>Where</b><b> </b>SistemId<b> </b><b>=</b><b> </b>1
<b>  </b><b>into</b><b> </b>:FRafGirisindeMaliyetiEsitle<b>,</b><b> </b>:FORafBirimMaliyetTakibiOlmasin<b>,</b><b> </b>:FSiparisMaliyetTakibiVar<b>,</b><b> </b>:Ormefirmaid<b>,</b><b> </b>:Sistemdovizid<b>;</b>

<b>  </b><b>Update</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b> </b><b>Set</b><b> </b>RafGirisindeMaliyetiEsitle<b> </b><b>=</b><b> </b>0<b>,</b><b> </b>ORafBirimMaliyetTakibiOlmasin<b> </b><b>=</b><b> </b>1<b>,</b><b> </b>SiparisMaliyetTakibiVar<b> </b><b>=</b><b> </b>0<b> </b><b>Where</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>SistemId<b> </b><b>=</b><b> </b>1<b>;</b>

<b>  </b>Sayac<b> </b><b>=</b><b> </b>1<b>;</b>
<b>  </b><b>While</b><b> </b><b>(</b>Sayac<b> </b><b>&lt;</b><b>=</b><b> </b>2<b>)</b><b> </b><b>do</b>
<b>  </b><b>begin</b>
<b>    </b><b>if</b><b> </b><b>(</b>Sayac<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b><b> </b>FHamTipleri<b> </b><b>=</b><b> </b>'0,6'<b>;</b>
<b>    </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>Sayac<b> </b><b>=</b><b> </b>2<b>)</b><b> </b><b>then</b><b>  </b>FHamTipleri<b> </b><b>=</b><b> </b>'1,2,3,4,5,7'<b>;</b>

<font color="# 0 0FF"><i>/* iki tarih arasında iplik ve likrala hareketlerinin raflarını buluyoruz.*/</i></font>
<b>    </b><b>For</b><b> </b><b>Select</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormerafid
<b>      </b><b>From</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>(</b><b>Null</b><b>,</b><b> </b>:Ahamid<b>,</b><b> </b>:Abaslangictarihi<b>,</b><b> </b>:Abitistarihi<b>,</b><b> </b><b>Null</b><b>)</b>
<b>      </b><b>Where</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamtipiid<b> </b><b>in</b><b> </b><b>(</b><b>Select</b><b> </b>Sayi<b> </b><b>from</b><b> </b><font color="# 080 0"><u>IntegerListesiGetir</u></font><b>(</b>:FHamTipleri<b>)</b><b>)</b>
<font color="# 0 0FF"><i>/*and Ormestokhareket.Ormerafid = 46764*/</i></font>
<b>      </b><b>Group</b><b> </b><b>By</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamadi<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormerafid
<b>      </b><b>Into</b><b> </b>:FHamId<b>,</b><b> </b>:FOrmerafid<b>  </b><b>do</b>
<b>    </b><b>begin</b>
<b>      </b><b>Delete</b><b> </b><b>From</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b> </b><b>where</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Ormerafid<b> </b><b>=</b><b> </b>:FOrmerafid<b>;</b>

<font color="# 0 0FF"><i>/* fifoya göre hesap yapabilmek için ilgili rafların önceki tüm hareketlerini buluyoruz.*/</i></font>
<b>      </b><b>For</b><b> </b><b>Select</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Firmaid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Firmaadi<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Stokhareketid<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Tarih<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormesiparisdetayid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Boyasipariskayitid<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Boyasiparisyil<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Boyasiparisid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Harekettipiid<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Harekettipiadi<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Uretimislemtipiid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Uretimislemtipiadi<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamiade<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Giriscikis<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormerafid<b>,</b>
<b>                 </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>Yeniormerafid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamadi<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamtipiid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Hamtipiadi<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Lot<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Renkid<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Renkadi<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Miktarbirim<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Brutmiktar<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Miktar<b>,</b><b> </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>RafStokmiktari<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Birimfiyat<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Dovizid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Birimfiyatsistemdoviz<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Birimmaliyet<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Tabandovizkuru1<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Tabandovizkuru2<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Boyairsaliyedetayid<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Partikayitid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Partisinifid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Partiyil<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Partiid<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>PShamstokmaliyeti<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>PSGUGPayiTutari<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>PSElektrikPayiTutari<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>PSDogalgazPayiTutari<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>PSBuharPayiTutari<b>,</b><b> </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>PSSuPayiTutari<b>,</b><b> </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>PSIscilikPayiTutari<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>PSBoyaMaliyeti<b>,</b><b> </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>PSKimyasalMaliyeti<b>,</b>
<b>                 </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>PSBoyaKimyasalMaliyeti<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>PSToplamMaliyet<b>,</b><b> </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>PSKgMaliyeti<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormeplanlamaid<b>,</b><b> </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>Uretimpartino<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormefisid<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormefisno<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormefistarih<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormeirsaliyeid<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormeirsaliyeno<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormeirsaliyetarih<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormeraftransferfisid<b>,</b><b> </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>Ormeraftransferfisidetayid<b>,</b>
<b>                 </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>Ormeraftransferfisyil<b>,</b><b> </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>Ormeraftransferfisno<b>,</b>
<b>                 </b><font color="# 080 0"><u>ormestokhareket</u></font><b>.</b>Ormeraftransferfistarih<b>,</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>SiparisTahminifireorani<b>,</b>
<b>                 </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>.</b>Ormestokkaydirmaid
<b>        </b><b>From</b><b> </b><font color="# 080 0"><u>Ormestokhareket</u></font><b>(</b><b>Null</b><b>,</b><b> </b>:FHamId<b>,</b><b> </b>'01.01.0001'<b>,</b><b> </b>:Abitistarihi<b>,</b><b> </b>:FOrmerafid<b>)</b>
<b>        </b><b>Into</b><b> </b>:Firmaid<b>,</b><b> </b>:Firmaadi<b>,</b><b> </b>:Stokhareketid<b>,</b><b> </b>:Tarih<b>,</b><b> </b>:Ormesiparisdetayid<b>,</b><b> </b>:Boyasipariskayitid<b>,</b><b> </b>:Boyasiparisyil<b>,</b>
<b>             </b>:Boyasiparisid<b>,</b><b> </b>:Harekettipiid<b>,</b><b> </b>:Hareketipiadi<b>,</b><b> </b>:Uretimislemtipiid<b>,</b><b> </b>:Uretimislemtipiadi<b>,</b><b> </b>:Hamiade<b>,</b>
<b>             </b>:Giriscikis<b>,</b><b> </b>:Ormerafid<b>,</b><b> </b>:YeniOrmerafid<b>,</b><b> </b>:Hamid<b>,</b><b> </b>:Hamadi<b>,</b><b> </b>:Hamtipiid<b>,</b><b> </b>:Hamtipiadi<b>,</b><b> </b>:lot<b>,</b><b> </b>:Renkid<b>,</b><b> </b>:Renkadi<b>,</b>
<b>             </b>:Miktarbirim<b>,</b><b> </b>:Brutmiktar<b>,</b><b> </b>:Miktar<b>,</b><b> </b>:RafStokmiktari<b>,</b><b> </b>:Birimfiyat<b>,</b><b> </b>:Dovizid<b>,</b><b> </b>:Birimfiyatsistemdoviz<b>,</b>
<b>             </b>:Birimmaliyet<b>,</b><b> </b>:Tabandovizkuru1<b>,</b><b> </b>:Tabandovizkuru2<b>,</b><b> </b>:Boyairsaliyedetayid<b>,</b><b> </b>:Partikayitid<b>,</b><b> </b>:Partisinifid<b>,</b>
<b>             </b>:Partiyil<b>,</b><b> </b>:Partiid<b>,</b><b> </b>:PShamstokmaliyeti<b>,</b><b> </b>:PSGUGPayiTutari<b>,</b><b> </b>:PSElektrikPayiTutari<b>,</b><b> </b>:PSDogalgazPayiTutari<b>,</b>
<b>             </b>:PSBuharPayiTutari<b>,</b><b> </b>:PSSuPayiTutari<b>,</b><b> </b>:PSIscilikPayiTutari<b>,</b><b> </b>:PSBoyaMaliyeti<b>,</b><b> </b>:PSKimyasalMaliyeti<b>,</b>
<b>             </b>:PSBoyaKimyasalMaliyeti<b>,</b><b> </b>:PSToplamMaliyet<b>,</b><b> </b>:PSKgMaliyeti<b>,</b><b> </b>:Ormeplanlamaid<b>,</b><b> </b>:Uretimpartino<b>,</b><b> </b>:Ormefisid<b>,</b>
<b>             </b>:Ormefisno<b>,</b><b> </b>:Ormefistarih<b>,</b><b> </b>:Ormeirsaliyeid<b>,</b><b> </b>:Ormeirsaliyeno<b>,</b><b> </b>:Ormeirsaliyetarih<b>,</b><b> </b>:Ormeraftransferfisid<b>,</b>
<b>             </b>:Ormeraftransferfisidetayid<b>,</b><b> </b>:Ormeraftransferfisyil<b>,</b><b> </b>:Ormeraftransferfisno<b>,</b><b> </b>:Ormeraftransferfistarih<b>,</b>
<b>             </b>:Siparistahminifireorani<b>,</b><b> </b>:Ormestokkaydirmaid<b> </b><b>do</b>
<b>      </b><b>begin</b>

<font color="# 0 0FF"><i>/* if ( Partisinifid is not null) then select Hamstokmaliyeti, from PARTISINIFMALIYETIKOLUSTUR(:Partisinifid) into :PShamstokmaliyeti, :PSBoyaKimyasalMaliyeti ;*/</i></font>

<b>        </b>Ormerafgirisfiyatlariid<b> </b><b>=</b><b> </b><b>null</b><b>;</b>
<b>        </b>ORGFkilo<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>ORGFBirimFiyat<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>ORGFKalankilo<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>MaliyetSistemdoviz<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Maliyetsistemdovizstr<b> </b><b>=</b><b> </b>''<b>;</b>
<b>        </b>Ortalamamaliyetsistemdoviz<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>BoyahaneCikisHamStokMasterId<b> </b><b>=</b><b> </b><b>Null</b><b>;</b>
<b>        </b>Fkilo<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b><b>If</b><b> </b><b>(</b>Miktarbirim<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b><b> </b>Fkilo<b> </b><b>=</b><b> </b>Miktar<b>;</b>
<b>        </b>StokHareketkalankilo<b> </b><b>=</b><b> </b>FKilo<b>;</b>

<b>        </b>Uretimecikaniplikkilo<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Uretimecikaniplikmaliyeti<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Uretimecikanlikrakilo<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Uretimecikanlikramaliyeti<b> </b><b>=</b><b> </b>0<b>;</b>

<b>        </b>Iplikkullanimorani<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Iplikmaliyeti<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Likrakullanimorani<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Likramaliyeti<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Hammaliyeti<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>Fstokkaydirmagirishareketid<b> </b><b>=</b><b> </b><b>null</b><b>;</b>

<b>        </b>BoyahaneCikisHamStokMasterId<b> </b><b>=</b><b> </b><b>Null</b><b>;</b>
<b>        </b>Hamstokfaturaid<b> </b><b>=</b><b> </b><b>Null</b><b>;</b>
<b>        </b>HamStokFaturaNo<b> </b><b>=</b><b> </b><b>Null</b><b>;</b>
<b>        </b>HamStokFaturaEntegrasyon<b> </b><b>=</b><b> </b><b>Null</b><b>;</b>
<font color="# 0 0FF"><i>/* hamrecete detayına sadece büküm üretimlerinde bakıyoruz.*/</i></font>
<b>        </b>HamReceteDetaySayisi<b> </b><b>=</b><b> </b><b>Null</b><b>;</b>
<b>        </b>HamReceteOranToplami<b> </b><b>=</b><b> </b><b>Null</b><b>;</b>
<b>        </b><b>If</b><b> </b><b>(</b>GirisCikis<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>Then</b>
<b>        </b><b>begin</b>
<b>          </b><b>if</b><b> </b><b>(</b>HareketTipiID<b> </b><b>=</b><b> </b><b>-</b>1<b>)</b><b> </b><b>then</b><b> </b>Yazilacakbirimmaliyet<b> </b><b>=</b><b> </b>Birimmaliyet<b>;</b>
<b>          </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b>(</b>HareketTipiID<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>Or</b><b> </b><b>(</b>HareketTipiID<b> </b><b>=</b><b> </b>4<b>)</b><b>)</b><b> </b><b>then</b><b> </b>Yazilacakbirimmaliyet<b> </b><b>=</b><b> </b>Birimfiyatsistemdoviz<b>;</b>
<b>          </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b>(</b>HareketTipiID<b> </b><b>=</b><b> </b>8<b>)</b><b> </b><b>Or</b><b> </b><b>(</b>HareketTipiID<b> </b><b>=</b><b> </b>9<b>)</b><b>)</b><b> </b><b>then</b>
<b>          </b><b>begin</b>
<b>            </b><b>if</b><b> </b><b>(</b>Uretimislemtipiid<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>            </b><b>begin</b>
<b>              </b><b>if</b><b> </b><b>(</b>Boyasipariskayitid<b> </b><b>Is</b><b> </b><b>Not</b><b> </b><b>Null</b><b>)</b><b> </b><b>Then</b>
<b>              </b><b>begin</b>
<b>                </b><b>For</b><b> </b><b>Select</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b>,</b><b> </b><b>Coalesce</b><b>(</b><b>Sum</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Miktar<b>)</b><b>,</b><b> </b>0<b>)</b><b>,</b><b> </b><b>Coalesce</b><b>(</b><b>Sum</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Birimmaliyet<b> </b><b>*</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Miktar<b>)</b><b>,</b><b> </b>0<b>)</b><b> </b><b>From</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font>
<b>                    </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>On</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamid<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Hamid
<b>                  </b><b>Where</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Boyasipariskayitid<b> </b><b>=</b><b> </b>:Boyasipariskayitid<b> </b><b>And</b>
<b>                        </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Uretimislemtipiid<b> </b><b>=</b><b> </b>0<b> </b><b>And</b>
<b>                        </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Hamid<b> </b><b>=</b><b> </b>:Hamid<b> </b><b>And</b>
<b>                        </b><b>(</b><b>(</b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Or</b><b> </b><b>(</b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b> </b><b>=</b><b> </b>6<b>)</b><b>)</b><b> </b><b>And</b>
<b>                        </b><b>(</b><b>(</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Firmaid<b> </b><b>=</b><b> </b>:Firmaid<b>)</b><b> </b><b>And</b>
<b>                        </b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Harekettipi<b> </b><b>=</b><b> </b>6<b>)</b><b>)</b><b> </b><b>Or</b><b> </b><b>(</b><b>(</b>:Firmaid<b> </b><b>Is</b><b> </b><b>Null</b><b>)</b><b> </b><b>And</b>
<b>                        </b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Harekettipi<b> </b><b>=</b><b> </b>7<b>)</b><b>)</b><b>)</b>
<b>                  </b><b>Group</b><b> </b><b>By</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid
<b>                  </b><b>into</b><b> </b>:Fhamtipiid<b>,</b><b> </b>:Fcikankilo<b>,</b><b> </b>:Fcikanmaliyeti<b> </b><b>do</b>
<b>                </b><b>begin</b>
<b>                  </b><b>If</b><b> </b><b>(</b>Fhamtipiid<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                  </b><b>begin</b>
<b>                    </b>Uretimecikaniplikkilo<b> </b><b>=</b><b> </b>Fcikankilo<b>;</b>
<b>                    </b>Uretimecikaniplikmaliyeti<b> </b><b>=</b><b> </b>Fcikanmaliyeti<b>;</b>
<b>                  </b><b>end</b>
<b>                  </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>Fhamtipiid<b> </b><b>=</b><b> </b>6<b>)</b><b> </b><b>Then</b>
<b>                  </b><b>begin</b>
<b>                    </b>Uretimecikanlikrakilo<b> </b><b>=</b><b> </b>Fcikankilo<b>;</b>
<b>                    </b>Uretimecikanlikramaliyeti<b> </b><b>=</b><b> </b>Fcikanmaliyeti<b>;</b>
<b>                  </b><b>end</b>
<b>                </b><b>end</b>
<b>              </b><b>end</b>
<b>              </b><b>else</b>
<b>              </b><b>begin</b>
<b>                </b><b>for</b><b> </b><b>Select</b><b> </b><font color="# 080 0"><u>Hamstokrecete</u></font><b>.</b>Recetehamid<b>,</b><b> </b><font color="# 080 0"><u>Hamstokrecete</u></font><b>.</b>Kullanimorani
<b>                  </b><b>From</b><b> </b><font color="# 080 0"><u>Hamstokrecete</u></font>
<b>                  </b><b>Where</b><b> </b><font color="# 080 0"><u>Hamstokrecete</u></font><b>.</b>Hamid<b> </b><b>=</b><b> </b>:Hamid
<b>                  </b><b>into</b><b> </b>:FHamReceteHamId<b>,</b><b> </b>:FHamReceteKullanimOrani<b> </b><b>do</b>
<b>                </b><b>begin</b>
<b>                  </b><b>If</b><b> </b><b>(</b>HamReceteDetaySayisi<b> </b><b>Is</b><b> </b><b>Null</b><b>)</b><b> </b><b>Then</b>
<b>                    </b>HamReceteDetaySayisi<b> </b><b>=</b><b> </b>0<b>;</b>
<b>                  </b><b>If</b><b> </b><b>(</b>HamReceteOranToplami<b> </b><b>Is</b><b> </b><b>Null</b><b>)</b><b> </b><b>Then</b>
<b>                    </b>HamReceteOranToplami<b> </b><b>=</b><b> </b>0<b>;</b>
<b>                  </b>HamReceteDetaySayisi<b> </b><b>=</b><b> </b>HamReceteDetaySayisi<b> </b><b>+</b><b> </b>1<b>;</b>
<b>                  </b>HamReceteOranToplami<b> </b><b>=</b><b> </b>HamReceteOranToplami<b> </b><b>+</b><b> </b>FHamReceteKullanimOrani<b>;</b>
<b>                  </b><b>For</b><b> </b><b>Select</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b>,</b><b> </b><b>Coalesce</b><b>(</b><b>Sum</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Miktar<b>)</b><b>,</b><b> </b>0<b>)</b><b>,</b>
<b>                             </b><b>Coalesce</b><b>(</b><b>Sum</b><b>(</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Birimmaliyet<b> </b><b>*</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Miktar<b> </b><b>*</b><b> </b>:FHamReceteKullanimOrani<b>)</b><b> </b><b>/</b><b> </b>100<b>)</b><b>,</b><b> </b>0<b>)</b>
<b>                    </b><b>From</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font>
<b>                    </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>On</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamid<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Hamid
<b>                    </b><b>Where</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Uretimislemtipiid<b> </b><b>=</b><b> </b>0<b> </b><b>And</b>
<b>                          </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Hamid<b> </b><b>=</b><b> </b>:FHamReceteHamId<b> </b><b>And</b>
<b>                          </b><b>(</b><b>(</b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Or</b><b> </b><b>(</b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b> </b><b>=</b><b> </b>6<b>)</b><b>)</b><b> </b><b>And</b>
<b>                          </b><b>(</b><b>(</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Firmaid<b> </b><b>=</b><b> </b>:Firmaid<b>)</b><b> </b><b>And</b>
<b>                          </b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Harekettipi<b> </b><b>=</b><b> </b>6<b>)</b><b>)</b><b> </b><b>Or</b><b> </b><b>(</b><b>(</b>:Firmaid<b> </b><b>Is</b><b> </b><b>Null</b><b>)</b><b> </b><b>And</b>
<b>                          </b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Harekettipi<b> </b><b>=</b><b> </b>7<b>)</b><b>)</b><b>)</b>
<b>                    </b><b>Group</b><b> </b><b>By</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid
<b>                    </b><b>Into</b><b> </b>:Fhamtipiid<b>,</b><b> </b>:Fcikankilo<b>,</b><b> </b>:Fcikanmaliyeti
<b>                  </b><b>Do</b>
<b>                  </b><b>Begin</b>
<b>                    </b><b>If</b><b> </b><b>(</b>Fhamtipiid<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                    </b><b>Begin</b>
<b>                      </b>Uretimecikaniplikkilo<b> </b><b>=</b><b> </b>Uretimecikaniplikkilo<b> </b><b>+</b><b> </b>Fcikankilo<b>;</b>
<b>                      </b>Uretimecikaniplikmaliyeti<b> </b><b>=</b><b> </b>Uretimecikaniplikmaliyeti<b> </b><b>+</b><b> </b>Fcikanmaliyeti<b>;</b>
<b>                    </b><b>End</b>
<b>                    </b><b>Else</b>
<b>                    </b><b>If</b><b> </b><b>(</b>Fhamtipiid<b> </b><b>=</b><b> </b>6<b>)</b><b> </b><b>Then</b>
<b>                    </b><b>Begin</b>
<b>                      </b>Uretimecikanlikrakilo<b> </b><b>=</b><b> </b>Uretimecikanlikrakilo<b> </b><b>+</b><b> </b>Fcikankilo<b>;</b>
<b>                      </b>Uretimecikanlikramaliyeti<b> </b><b>=</b><b> </b>Uretimecikanlikramaliyeti<b> </b><b>+</b><b> </b>Fcikanmaliyeti<b>;</b>
<b>                    </b><b>End</b>
<b>                  </b><b>End</b>
<b>                </b><b>End</b>
<b>              </b><b>End</b>

<font color="# 0 0FF"><i>/* ortalama iplik fiyatı yeterli olduğu için iade iplikler hesaba katılmadı.*/</i></font>
<b>              </b><b>If</b><b> </b><b>(</b>uretimecikaniplikmaliyeti<b> </b><b>&gt;</b><b> </b>0<b> </b><b>And</b>
<b>                  </b>uretimecikaniplikkilo<b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                </b>Iplikmaliyeti<b> </b><b>=</b><b> </b>Uretimecikaniplikmaliyeti<b> </b><b>/</b><b> </b>Uretimecikaniplikkilo<b>;</b>
<b>              </b><b>If</b><b> </b><b>(</b>uretimecikanlikramaliyeti<b> </b><b>&gt;</b><b> </b>0<b> </b><b>And</b>
<b>                  </b>uretimecikanlikrakilo<b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                </b>Likramaliyeti<b> </b><b>=</b><b> </b>Uretimecikanlikramaliyeti<b> </b><b>/</b><b> </b>uretimecikanlikrakilo<b>;</b>

<b>              </b>Yazilacakbirimmaliyet<b> </b><b>=</b><b> </b>Birimfiyatsistemdoviz<b> </b><b>+</b><b> </b>Iplikmaliyeti<b> </b><b>+</b><b> </b>Likramaliyeti<b>;</b>

<b>            </b><b>end</b>
<b>            </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>Uretimislemtipiid<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>Then</b>
<b>            </b><b>begin</b>
<b>              </b><b>Select</b><b> </b><b>Coalesce</b><b>(</b><b>Sum</b><b>(</b><font color="# 080 0"><u>OrmePlanlamaRecete</u></font><b>.</b>KullanimOrani<b>)</b><b>,</b><b> </b>0<b>)</b><b> </b><b>From</b><b> </b><font color="# 080 0"><u>OrmePlanlamaRecete</u></font>
<b>              </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>On</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamID<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmePlanlamaRecete</u></font><b>.</b>HamId
<b>              </b><b>Where</b><b> </b><font color="# 080 0"><u>OrmePlanlamaRecete</u></font><b>.</b>OrmePlanlamaId<b> </b><b>=</b><b> </b>:OrmePlanlamaId<b> </b><b>And</b>
<b>                    </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamTipiId<b> </b><b>=</b><b> </b>0
<b>              </b><b>Into</b><b> </b>:Iplikkullanimorani<b>;</b>

<b>              </b><b>Select</b><b> </b><b>Coalesce</b><b>(</b><b>Sum</b><b>(</b><font color="# 080 0"><u>OrmePlanlamaRecete</u></font><b>.</b>KullanimOrani<b>)</b><b>,</b><b> </b>0<b>)</b><b> </b><b>From</b><b> </b><font color="# 080 0"><u>OrmePlanlamaRecete</u></font>
<b>              </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>On</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamID<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmePlanlamaRecete</u></font><b>.</b>HamId
<b>              </b><b>Where</b><b> </b><font color="# 080 0"><u>OrmePlanlamaRecete</u></font><b>.</b>OrmePlanlamaId<b> </b><b>=</b><b> </b>:OrmePlanlamaId<b> </b><b>And</b>
<b>                    </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamTipiId<b> </b><b>=</b><b> </b>6
<b>              </b><b>Into</b><b> </b>:Likrakullanimorani<b>;</b>

<b>              </b><b>For</b><b> </b><b>Select</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b>,</b><b> </b><b>Coalesce</b><b>(</b><b>Sum</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Miktar<b>)</b><b>,</b><b> </b>0<b>)</b><b>,</b>
<b>                         </b><b>Coalesce</b><b>(</b><b>Sum</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Birimmaliyet<b> </b><b>*</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Miktar<b>)</b><b>,</b><b> </b>0<b>)</b>
<b>                </b><b>From</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font>
<b>                </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>On</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamid<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Hamid
<b>                </b><b>Where</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Ormeplanlamaid<b> </b><b>=</b><b> </b>:Ormeplanlamaid<b> </b><b>And</b>
<b>                      </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Uretimislemtipiid<b> </b><b>=</b><b> </b>1<b> </b><b>And</b>
<b>                      </b><b>(</b><b>(</b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Or</b><b> </b><b>(</b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid<b> </b><b>=</b><b> </b>6<b>)</b><b>)</b><b> </b><b>And</b>
<b>                      </b><b>(</b><b>(</b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Firmaid<b> </b><b>=</b><b> </b>:Firmaid<b>)</b><b> </b><b>And</b>
<b>                      </b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Harekettipi<b> </b><b>=</b><b> </b>6<b>)</b><b>)</b><b> </b><b>Or</b><b> </b><b>(</b><b>(</b>:Firmaid<b> </b><b>Is</b><b> </b><b>Null</b><b>)</b><b> </b><b>And</b>
<b>                      </b><b>(</b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Harekettipi<b> </b><b>=</b><b> </b>7<b>)</b><b>)</b><b>)</b>
<b>                </b><b>Group</b><b> </b><b>By</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamtipiid
<b>                </b><b>Into</b><b> </b>:Fhamtipiid<b>,</b><b> </b>:Fcikankilo<b>,</b><b> </b>:Fcikanmaliyeti
<b>              </b><b>Do</b>
<b>              </b><b>Begin</b>
<b>                </b><b>If</b><b> </b><b>(</b>Fhamtipiid<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                </b><b>Begin</b>
<b>                  </b>Uretimecikaniplikkilo<b> </b><b>=</b><b> </b>Fcikankilo<b>;</b>
<b>                  </b>Uretimecikaniplikmaliyeti<b> </b><b>=</b><b> </b>Fcikanmaliyeti<b>;</b>
<b>                </b><b>End</b>
<b>                </b><b>Else</b>
<b>                </b><b>If</b><b> </b><b>(</b>Fhamtipiid<b> </b><b>=</b><b> </b>6<b>)</b><b> </b><b>Then</b>
<b>                </b><b>Begin</b>
<b>                  </b>Uretimecikanlikrakilo<b> </b><b>=</b><b> </b>Fcikankilo<b>;</b>
<b>                  </b>Uretimecikanlikramaliyeti<b> </b><b>=</b><b> </b>Fcikanmaliyeti<b>;</b>
<b>                </b><b>End</b>

<b>                </b><b>If</b><b> </b><b>(</b>Uretimecikaniplikmaliyeti<b> </b><b>&gt;</b><b> </b>0<b> </b><b>And</b>
<b>                    </b>Uretimecikaniplikkilo<b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                  </b>Iplikmaliyeti<b> </b><b>=</b><b> </b><b>(</b>Uretimecikaniplikmaliyeti<b> </b><b>/</b><b> </b>Uretimecikaniplikkilo<b>)</b><b> </b><b>*</b><b> </b><b>IIF</b><b>(</b>Iplikkullanimorani<b> </b><b>&gt;</b><b> </b>0<b>,</b><b> </b>Iplikkullanimorani<b> </b><b>/</b><b> </b>100<b>,</b><b> </b>1<b>)</b><b>;</b>
<b>                </b><b>If</b><b> </b><b>(</b>Uretimecikanlikramaliyeti<b> </b><b>&gt;</b><b> </b>0<b> </b><b>And</b>
<b>                    </b>Uretimecikanlikrakilo<b> </b><b>&gt;</b><b> </b>0<b> </b><b>And</b>
<b>                    </b>Likrakullanimorani<b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                  </b>Likramaliyeti<b> </b><b>=</b><b> </b><b>(</b>Uretimecikanlikramaliyeti<b> </b><b>/</b><b> </b>Uretimecikanlikrakilo<b>)</b><b> </b><b>*</b><b> </b><b>IIF</b><b>(</b>Likrakullanimorani<b> </b><b>&gt;</b><b> </b>0<b>,</b><b> </b>Likrakullanimorani<b> </b><b>/</b><b> </b>100<b>,</b><b> </b>1<b>)</b><b>;</b>

<b>                </b><b>If</b><b> </b><b>(</b>Siparistahminifireorani<b> </b><b>&gt;</b><b> </b>0<b> </b><b>And</b>
<b>                    </b>Hamiade<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                  </b>Iplikmaliyeti<b> </b><b>=</b><b> </b>Iplikmaliyeti<b> </b><b>*</b><b> </b><b>(</b><b>(</b>100<b> </b><b>+</b><b> </b>Siparistahminifireorani<b>)</b><b> </b><b>/</b><b> </b>100<b>)</b><b>;</b>
<b>              </b><b>End</b>

<b>              </b><b>If</b><b> </b><b>(</b>Hamiade<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>Then</b>
<b>                </b>Hammaliyeti<b> </b><b>=</b><b> </b>Iplikmaliyeti<b> </b><b>+</b><b> </b>Likramaliyeti<b>;</b>
<b>              </b><b>Else</b>
<b>                </b>Hammaliyeti<b> </b><b>=</b><b> </b>Birimfiyatsistemdoviz<b> </b><b>+</b><b> </b>Iplikmaliyeti<b> </b><b>+</b><b> </b>Likramaliyeti<b>;</b>

<b>              </b>Yazilacakbirimmaliyet<b> </b><b>=</b><b> </b>Hammaliyeti<b>;</b>
<b>            </b><b>End</b>
<b>            </b><b>Else</b>
<b>            </b><b>If</b><b> </b><b>(</b>Uretimislemtipiid<b> </b><b>=</b><b> </b>2<b>)</b><b> </b><b>Then</b>
<b>            </b><b>Begin</b>
<b>              </b><b>If</b><b> </b><b>(</b>Hamiade<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                </b>Yazilacakbirimmaliyet<b> </b><b>=</b><b> </b>Pskgmaliyeti<b> </b><b>+</b><b> </b>Birimfiyatsistemdoviz<b>;</b>
<b>              </b><b>If</b><b> </b><b>(</b>Hamiade<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>Then</b>
<b>                </b>Yazilacakbirimmaliyet<b> </b><b>=</b><b> </b>Pskgmaliyeti<b>;</b>
<b>            </b><b>End</b>
<b>          </b><b>End</b>
<b>          </b><b>Else</b>
<b>          </b><b>If</b><b> </b><b>(</b>Harekettipiid<b> </b><b>=</b><b> </b>11<b>)</b><b> </b><b>Then</b>
<b>          </b><b>Begin</b>
<font color="# 0 0FF"><i>/* kaydırılan stoğun diğer rafa giriş maliyetini kaydet*/</i></font>
<b>            </b><b>Select</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Stokhareketid<b>,</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Birimmaliyet
<b>            </b><b>From</b><b> </b><font color="# 080 0"><u>Ormefis</u></font>
<b>            </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b> </b><b>On</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Ormefisid<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Ormefis</u></font><b>.</b>Ormefisid
<b>            </b><b>Where</b><b> </b><font color="# 080 0"><u>Ormefis</u></font><b>.</b>Ormestokkaydirmaid<b> </b><b>=</b><b> </b>:Ormestokkaydirmaid<b> </b><b>And</b>
<b>                  </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Harekettipi<b> </b><b>=</b><b> </b>10
<b>            </b><b>Into</b><b> </b>:Fstokkaydirmagirishareketid<b>,</b><b> </b>:Yazilacakbirimmaliyet<b>;</b>

<b>            </b><b>If</b><b> </b><b>(</b>Fstokkaydirmagirishareketid<b> </b><b>Is</b><b> </b><b>Not</b><b> </b><b>Null</b><b>)</b><b> </b><b>Then</b>
<b>              </b><b>Update</b><b> </b><font color="# 080 0"><u>StokHareket</u></font>
<b>              </b><b>Set</b><b> </b>Birimmaliyet<b> </b><b>=</b><b> </b>:Yazilacakbirimmaliyet<b>,</b>
<b>                  </b>NeredenUpdate<b> </b><b>=</b><b> </b>4<b>,</b>
<b>                  </b>LinkIslemi<b> </b><b>=</b><b> </b>1<b>,</b>
<b>                  </b>GirisLinkIslemi<b> </b><b>=</b><b> </b>1
<b>              </b><b>Where</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>StokHareketId<b> </b><b>=</b><b> </b>:Stokhareketid<b>;</b>
<b>          </b><b>End</b>

<b>          </b><b>Select</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Ormerafgirisfiyatlariid
<b>          </b><b>From</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font>
<b>          </b><b>Where</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Tarih<b> </b><b>=</b><b> </b>:Tarih<b> </b><b>And</b>
<b>                </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Ormerafid<b> </b><b>=</b><b> </b>:Ormefirmaid<b> </b><b>And</b>
<b>                </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Birimfiyat<b> </b><b>=</b><b> </b>:Yazilacakbirimmaliyet<b> </b><b>And</b>
<b>                </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Dovizid<b> </b><b>=</b><b> </b>:Sistemdovizid
<b>          </b><b>Into</b><b> </b>:Ormerafgirisfiyatlariid<b>;</b>

<b>          </b><b>If</b><b> </b><b>(</b>Ormerafgirisfiyatlariid<b> </b><b>is</b><b> </b><b>null</b><b>)</b><b> </b><b>Then</b>
<b>          </b><b>Begin</b>
<b>            </b><b>Insert</b><b> </b><b>Into</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b> </b><b>(</b>Tarih<b>,</b><b> </b>Ormerafid<b>,</b><b> </b>Hamid<b>,</b><b> </b>Stokhareketid<b>,</b><b> </b>Ormeraftransferfisidetayid<b>,</b>
<b>                                               </b>Harekettipiid<b>,</b><b> </b>Uretimislemtipiid<b>,</b><b> </b>Hamiade<b>,</b><b> </b>Birimfiyat<b>,</b><b> </b>Dovizid<b>,</b><b> </b>Kilo<b>,</b>
<b>                                               </b>Kalankilo<b>)</b>
<b>            </b><b>Values</b><b> </b><b>(</b>:Tarih<b>,</b><b> </b><b>Coalesce</b><b>(</b>:Yeniormerafid<b>,</b><b> </b>:Ormerafid<b>)</b><b>,</b><b> </b>:Hamid<b>,</b><b> </b>:Stokhareketid<b>,</b><b> </b>:Ormeraftransferfisidetayid<b>,</b>
<b>                                     </b>:Harekettipiid<b>,</b><b> </b>:Uretimislemtipiid<b>,</b><b> </b>:Hamiade<b>,</b><b> </b>:Yazilacakbirimmaliyet<b>,</b>
<b>                                     </b>:Sistemdovizid<b>,</b><b> </b>:Fkilo<b>,</b><b> </b>:Fkilo<b>)</b><b>;</b>
<b>          </b><b>End</b>
<b>          </b><b>Else</b>
<b>          </b><b>Begin</b>
<b>            </b><b>Update</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font>
<b>            </b><b>Set</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Kilo<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Kilo<b> </b><b>+</b><b> </b>:Fkilo<b>,</b>
<b>                </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Kalankilo<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Kalankilo<b> </b><b>+</b><b> </b>:Fkilo
<b>            </b><b>Where</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Ormerafgirisfiyatlariid<b> </b><b>=</b><b> </b>:Ormerafgirisfiyatlariid<b>;</b>
<b>          </b><b>End</b>

<b>        </b><b>End</b>
<b>        </b><b>Else</b>
<b>        </b><b>If</b><b> </b><b>(</b>Giriscikis<b> </b><b>=</b><b> </b><b>-</b>1<b>)</b><b> </b><b>Then</b>
<b>        </b><b>Begin</b>
<b>          </b><b>for</b><b> </b><b>Select</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Ormerafgirisfiyatlariid<b>,</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Tarih<b>,</b>
<b>                     </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Kilo<b>,</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Birimfiyat<b>,</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Kalankilo
<b>            </b><b>From</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font>
<b>            </b><b>Where</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Ormerafid<b> </b><b>=</b><b> </b>:Ormerafid<b> </b><b>And</b>
<b>                  </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Tarih<b> </b><b>&lt;</b><b>=</b><b> </b>:Tarih<b> </b><b>And</b>
<b>                  </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Kalankilo<b> </b><b>&gt;</b><b> </b>0
<b>            </b><b>Order</b><b> </b><b>By</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Tarih<b> </b><b>Asc</b><b>,</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Ormerafgirisfiyatlariid<b> </b><b>Asc</b>
<b>            </b><b>Into</b><b> </b>:Ormerafgirisfiyatlariid<b>,</b><b> </b>:ORGFtarih<b>,</b><b> </b>:ORGFkilo<b>,</b><b> </b>:ORGFBirimFiyat<b>,</b><b> </b>:ORGFKalankilo
<b>          </b><b>Do</b>
<b>          </b><b>Begin</b>
<b>            </b><b>If</b><b> </b><b>(</b>StokHareketkalankilo<b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>            </b><b>Begin</b>
<b>              </b><b>If</b><b> </b><b>(</b>StokHareketkalankilo<b> </b><b>&gt;</b><b>=</b><b> </b>ORGFKalankilo<b>)</b><b> </b><b>Then</b>
<b>              </b><b>Begin</b>
<b>                </b>MaliyetSistemdoviz<b> </b><b>=</b><b> </b>MaliyetSistemdoviz<b> </b><b>+</b><b> </b><b>(</b>ORGFKalankilo<b> </b><b>*</b><b> </b>ORGFBirimFiyat<b>)</b><b>;</b>
<font color="# 0 0FF"><i>/* TEST İÇİN GEREK*/</i></font>
<b>                </b><b>If</b><b> </b><b>(</b><b>Char_Length</b><b>(</b>maliyetSistemdovizstr<b>)</b><b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                  </b>Maliyetsistemdovizstr<b> </b><b>=</b><b> </b>Maliyetsistemdovizstr<b> </b><b>|</b><b>|</b><b> </b>','<b>;</b>

<b>                </b>Maliyetsistemdovizstr<b> </b><b>=</b><b> </b>Maliyetsistemdovizstr<b> </b><b>|</b><b>|</b><b> </b><b>Cast</b><b>(</b>ORGFtarih<b> </b><b>As</b><b> </b><b>Date</b><b>)</b><b> </b><b>|</b><b>|</b><b> </b>'-(orgfid:'<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>Egemenintegertostr</u></font><b>(</b>Ormerafgirisfiyatlariid<b>)</b><b> </b><b>|</b><b>|</b><b> </b>'-orid:'<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>Egemenintegertostr</u></font><b>(</b>Ormerafid<b>)</b><b> </b><b>|</b><b>|</b><b> </b>')-('<b> </b><b>|</b><b>|</b><b> </b><b>Round</b><b>(</b>ORGFKalankilo<b>,</b><b> </b>5<b>)</b><b> </b><b>|</b><b>|</b><b> </b>'*'<b> </b><b>|</b><b>|</b><b> </b><b>Round</b><b>(</b>ORGFBirimFiyat<b>,</b><b> </b>5<b>)</b><b> </b><b>|</b><b>|</b><b> </b>')'<b>;</b>
<font color="# 0 0FF"><i>/**/</i></font>
<b>                </b>StokHareketkalankilo<b> </b><b>=</b><b> </b>StokHareketkalankilo<b> </b><b>-</b><b> </b>ORGFKalankilo<b>;</b>
<font color="# 0 0FF"><i>/* girişin kendi bittiği için sıfırlıyoruz.*/</i></font>
<b>                </b>ORGFKalankilo<b> </b><b>=</b><b> </b>0<b>;</b>
<b>              </b><b>End</b>
<b>              </b><b>Else</b>
<b>              </b><b>If</b><b> </b><b>(</b>ORGFKalankilo<b> </b><b>&gt;</b><b>=</b><b> </b>StokHareketkalankilo<b>)</b><b> </b><b>Then</b>
<b>              </b><b>Begin</b>
<b>                </b>MaliyetSistemdoviz<b> </b><b>=</b><b> </b>MaliyetSistemdoviz<b> </b><b>+</b><b> </b><b>(</b>StokHareketkalankilo<b> </b><b>*</b><b> </b>ORGFBirimFiyat<b>)</b><b>;</b>
<font color="# 0 0FF"><i>/* TEST İÇİN GEREK*/</i></font>
<b>                </b><b>If</b><b> </b><b>(</b><b>Char_Length</b><b>(</b>Maliyetsistemdovizstr<b>)</b><b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>Then</b>
<b>                  </b>Maliyetsistemdovizstr<b> </b><b>=</b><b> </b>Maliyetsistemdovizstr<b> </b><b>|</b><b>|</b><b> </b>','<b>;</b>

<b>                </b>Maliyetsistemdovizstr<b> </b><b>=</b><b> </b>Maliyetsistemdovizstr<b> </b><b>|</b><b>|</b><b> </b><b>Cast</b><b>(</b>ORGFtarih<b> </b><b>As</b><b> </b><b>Date</b><b>)</b><b> </b><b>|</b><b>|</b><b> </b>'-(orgfid:'<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>Egemenintegertostr</u></font><b>(</b>Ormerafgirisfiyatlariid<b>)</b><b> </b><b>|</b><b>|</b><b> </b>'-orid:'<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>Egemenintegertostr</u></font><b>(</b>Ormerafid<b>)</b><b> </b><b>|</b><b>|</b><b> </b>')-('<b> </b><b>|</b><b>|</b><b> </b><b>Round</b><b>(</b>StokHareketkalankilo<b>,</b><b> </b>5<b>)</b><b> </b><b>|</b><b>|</b><b> </b>'*'<b> </b><b>|</b><b>|</b><b> </b><b>Round</b><b>(</b>ORGFBirimFiyat<b>,</b><b> </b>5<b>)</b><b> </b><b>|</b><b>|</b><b> </b>')'<b>;</b>
<font color="# 0 0FF"><i>/**/</i></font>
<b>                </b>ORGFKalankilo<b> </b><b>=</b><b> </b>ORGFKalankilo<b> </b><b>-</b><b> </b>StokHareketkalankilo<b>;</b>
<b>                </b>StokHareketkalankilo<b> </b><b>=</b><b> </b>0<b>;</b>

<b>              </b><b>End</b>

<b>            </b><b>End</b>

<b>            </b><b>Update</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font>
<b>            </b><b>Set</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Kalankilo<b> </b><b>=</b><b> </b>:ORGFKalankilo
<b>            </b><b>Where</b><b> </b><font color="# 080 0"><u>Ormerafgirisfiyatlari</u></font><b>.</b>Ormerafgirisfiyatlariid<b> </b><b>=</b><b> </b>:Ormerafgirisfiyatlariid<b>;</b>
<b>          </b><b>End</b>

<b>          </b><b>If</b><b> </b><b>(</b>MaliyetSistemdoviz<b> </b><b>&gt;</b><b> </b>0<b> </b><b>and</b>
<b>              </b>Fkilo<b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>then</b>
<b>            </b>Ortalamamaliyetsistemdoviz<b> </b><b>=</b><b> </b><b>(</b>MaliyetSistemdoviz<b> </b><b>/</b><b> </b>Fkilo<b>)</b><b>;</b>
<font color="# 0 0FF"><i>/* if (HareketTipi = 6 and Tarih &gt;= ABaslangicTarihi) then update stokhareket set stokhareket.Birimmaliyet = :ortalamamaliyetsistemdoviz where stokhareket.stokhareketid = :stokhareketid ;*/</i></font>
<b>          </b>Yazilacakbirimmaliyet<b> </b><b>=</b><b> </b>Ortalamamaliyetsistemdoviz<b>;</b>

<b>          </b><b>if</b><b> </b><b>(</b>Harekettipiid<b> </b><b>=</b><b> </b><b>-</b>1<b>)</b><b> </b><b>then</b>
<b>          </b><b>Begin</b>
<b>            </b><b>Update</b><b> </b><font color="# 080 0"><u>Ormeraftransferfisidetay</u></font>
<b>            </b><b>Set</b><b> </b><font color="# 080 0"><u>Ormeraftransferfisidetay</u></font><b>.</b>Birimmaliyet<b> </b><b>=</b><b> </b>:Ortalamamaliyetsistemdoviz
<b>            </b><b>Where</b><b> </b><font color="# 080 0"><u>Ormeraftransferfisidetay</u></font><b>.</b>Ormeraftransferfisidetayid<b> </b><b>=</b><b> </b>:Ormeraftransferfisidetayid<b>;</b>
<b>          </b><b>End</b>
<b>          </b><b>Else</b>
<b>          </b><b>If</b><b> </b><b>(</b><b>(</b>Harekettipiid<b> </b><b>=</b><b> </b>6<b>)</b><b> </b><b>or</b><b> </b><b>(</b>Harekettipiid<b> </b><b>=</b><b> </b>7<b>)</b><b>)</b><b> </b><b>Then</b>
<b>          </b><b>Begin</b>
<b>            </b><b>Select</b><b> </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Hamstokmasterid<b>,</b><b> </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Hamstokfaturaid<b>,</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font><b>.</b>Faturano<b>,</b>
<b>                   </b><font color="# 080 0"><u>Hamstokfatura</u></font><b>.</b>Entegrasyon
<b>            </b><b>From</b><b> </b><font color="# 080 0"><u>Hamstokmaster</u></font>
<b>            </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font><b>.</b>Hamstokfaturaid<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Hamstokfaturaid
<b>            </b><b>Where</b><b> </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Stokhareketid<b> </b><b>=</b><b> </b>:Stokhareketid
<b>            </b><b>Into</b><b> </b>:BoyahaneCikisHamStokMasterId<b>,</b><b> </b>:Hamstokfaturaid<b>,</b><b> </b>:HamStokFaturaNo<b>,</b><b> </b>:HamStokFaturaEntegrasyon<b>;</b>

<b>            </b><b>If</b><b> </b><b>(</b>BoyahaneCikisHamStokMasterId<b> </b><b>Is</b><b> </b><b>Not</b><b> </b><b>Null</b><b>)</b><b> </b><b>Then</b>
<b>            </b><b>Begin</b>

<b>              </b><b>If</b><b> </b><b>(</b>Hamstokfaturaid<b> </b><b>is</b><b> </b><b>not</b><b> </b><b>null</b><b>)</b><b> </b><b>Then</b>
<b>                </b><b>Update</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font>
<b>                </b><b>Set</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font><b>.</b>Entegrasyon<b> </b><b>=</b><b> </b>0
<b>                </b><b>Where</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font><b>.</b>Hamstokfaturaid<b> </b><b>=</b><b> </b>:Hamstokfaturaid<b>;</b>

<b>              </b><b>Update</b><b> </b><font color="# 080 0"><u>Hamstokmaster</u></font>
<b>              </b><b>Set</b><b> </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Linkislemi<b> </b><b>=</b><b> </b>1<b>,</b>
<b>                  </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Neredenupdate<b> </b><b>=</b><b> </b>2<b>,</b>
<b>                  </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Birimfiyat<b> </b><b>=</b><b> </b>:Yazilacakbirimmaliyet<b>,</b>
<b>                  </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Birimmaliyet<b> </b><b>=</b><b> </b>:Yazilacakbirimmaliyet
<b>              </b><b>Where</b><b> </b><font color="# 080 0"><u>Hamstokmaster</u></font><b>.</b>Hamstokmasterid<b> </b><b>=</b><b> </b>:BoyahaneCikisHamStokMasterId<b>;</b>

<b>              </b><b>If</b><b> </b><b>(</b>Hamstokfaturaid<b> </b><b>is</b><b> </b><b>not</b><b> </b><b>null</b><b>)</b><b> </b><b>Then</b>
<b>                </b><b>Update</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font>
<b>                </b><b>Set</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font><b>.</b>Entegrasyon<b> </b><b>=</b><b> </b>:HamStokFaturaEntegrasyon
<b>                </b><b>Where</b><b> </b><font color="# 080 0"><u>Hamstokfatura</u></font><b>.</b>Hamstokfaturaid<b> </b><b>=</b><b> </b>:Hamstokfaturaid<b>;</b>

<b>            </b><b>End</b>
<b>          </b><b>end</b>
<b>          </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>Harekettipiid<b> </b><b>=</b><b> </b>10<b>)</b><b> </b><b>then</b>
<b>          </b><b>begin</b>
<font color="# 0 0FF"><i>/* kaydırılan stoğun diğer rafa giriş maliyetini kaydet*/</i></font>
<b>            </b><b>Select</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Stokhareketid<b> </b><b>From</b><b> </b><font color="# 080 0"><u>Ormefis</u></font>
<b>            </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b> </b><b>On</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Ormefisid<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Ormefis</u></font><b>.</b>Ormefisid
<b>            </b><b>Where</b><b> </b><font color="# 080 0"><u>Ormefis</u></font><b>.</b>Ormestokkaydirmaid<b> </b><b>=</b><b> </b>:Ormestokkaydirmaid<b> </b><b>And</b>
<b>                  </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Harekettipi<b> </b><b>=</b><b> </b>11
<b>            </b><b>Into</b><b> </b>:Fstokkaydirmagirishareketid<b>;</b>

<b>            </b><b>If</b><b> </b><b>(</b>Fstokkaydirmagirishareketid<b> </b><b>Is</b><b> </b><b>Not</b><b> </b><b>Null</b><b>)</b><b> </b><b>Then</b>
<b>              </b><b>Update</b><b> </b><font color="# 080 0"><u>StokHareket</u></font>
<b>              </b><b>Set</b><b> </b>BirimMaliyet<b> </b><b>=</b><b> </b>:Yazilacakbirimmaliyet<b>,</b>
<b>                  </b>NeredenUpdate<b> </b><b>=</b><b> </b>4<b>,</b>
<b>                  </b>LinkIslemi<b> </b><b>=</b><b> </b>1<b>,</b>
<b>                  </b>GirisLinkIslemi<b> </b><b>=</b><b> </b>1
<b>              </b><b>Where</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>StokHareketId<b> </b><b>=</b><b> </b>:stokhareketid<b>;</b>
<b>          </b><b>end</b>
<b>        </b><b>end</b>

<b>        </b><b>if</b><b> </b><b>(</b>Yazilacakbirimmaliyet<b> </b><b>Is</b><b> </b><b>Not</b><b> </b><b>Null</b><b> </b><b>and</b><b> </b>Yazilacakbirimmaliyet<b> </b><b>&gt;</b><b> </b>0<b>)</b><b> </b><b>then</b>
<b>          </b><b>Update</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b> </b><b>Set</b><b> </b>BirimMaliyet<b> </b><b>=</b><b> </b>:Yazilacakbirimmaliyet<b>,</b><b> </b>NeredenUpdate<b> </b><b>=</b><b> </b>4<b>,</b><b> </b>LinkIslemi<b> </b><b>=</b><b> </b>1<b>,</b><b> </b>GirisLinkIslemi<b> </b><b>=</b><b> </b>1<b> </b><b>Where</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>StokHareketId<b> </b><b>=</b><b> </b>:Stokhareketid<b>;</b>

<b>        </b><b>Suspend</b><b>;</b>
<b>      </b><b>end</b>
<b>    </b><b>end</b>

<b>    </b>Sayac<b> </b><b>=</b><b> </b>Sayac<b> </b><b>+</b><b> </b>1<b>;</b>
<b>  </b><b>end</b>

<b>  </b><b>Update</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b> </b><b>Set</b><b> </b>RafGirisindeMaliyetiEsitle<b> </b><b>=</b><b> </b>:FRafGirisindeMaliyetiEsitle<b>,</b><b> </b>ORafBirimMaliyetTakibiOlmasin<b> </b><b>=</b><b> </b>:FORafBirimMaliyetTakibiOlmasin<b>,</b>
<b>                    </b>SiparisMaliyetTakibiVar<b> </b><b>=</b><b> </b>:FSiparisMaliyetTakibiVar<b> </b><b>Where</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>SistemId<b> </b><b>=</b><b> </b>1<b>;</b>
<b>end</b>

</pre></code>
</span></P>
<P CLASS="Base">&nbsp;</P>
<DIV CLASS="footer"><BR><HR></DIV>
  <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH=100%>
    <TR VALIGN="middle">
      <TD>&nbsp;&nbsp;&nbsp;&nbsp;</TD>
      <TD ALIGN="left" WIDTH="54px" NOWRAP>
        <A HREF="ORMEHAMSTOKSONALISFIYATI_V2.html"><IMG ALT="Previous topic" SRC="../Images/GoPrev.gif" BORDER="0"></A>
        <A HREF="../Index.html"><IMG ALT="Chapter index" SRC="../Images/GoIndex.gif" BORDER="0"></A>
        <A HREF="ORMEIPLIKFIRERAPORU_1.html"><IMG ALT="Next topic" SRC="../Images/GoNext.gif" BORDER="0"></A>
      </TD>
    </TR>
  </TABLE>
<P CLASS="Base">&nbsp;</P>
</BODY></HTML>
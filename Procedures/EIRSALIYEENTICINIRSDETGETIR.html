<HTML>
<HEAD>
<TITLE>EIRSALIYEENTICINIRSDETGETIR</TITLE>
<META content="text/html; charset=utf-8" http-equiv=Content-Type>
<LINK HREF="../IBEHTMLDoc.css" type=text/css rel=STYLESHEET>
 
<xml>
<IBEHelp:Attr Name="ItemOrder" Value="488800"/>
</xml>
 
</HEAD>
<BODY>
<DIV ID="nsbanner">
  <DIV ID="bannerrow1">
    <TABLE CLASS="bannerparthead" CELLSPACING=0>
      <TR ID="hdr" VALIGN="middle">
        <TD CLASS="runninghead">"E:\Egemen\EB01\Dataserver\DATA\FERGANAGLOBAL\EB01DATA.GDB". Procedures</TD>
        <TD ALIGN="left" WIDTH="54px" NOWRAP>
          <A HREF="EIRSALIYEENTICINIRSALIYEGETIR.html"><IMG ALT="Previous topic" SRC="../Images/GoPrev.gif" BORDER="0"></A>
          <A HREF="../Index.html"><IMG ALT="Chapter index" SRC="../Images/GoIndex.gif" BORDER="0"></A>
          <A HREF="ELIARARIZABAKIMKAYDET.html"><IMG ALT="Next topic" SRC="../Images/GoNext.gif" BORDER="0"></A>
        </TD>
      </TR>
    </TABLE>
  </DIV>
  <DIV ID="TitleRow">
    <P CLASS="dtH1">EIRSALIYEENTICINIRSDETGETIR</P>
  </DIV>
 </DIV>
<P CLASS="Base">&nbsp;</P>
<P CLASS="Header1">Input Parameters</P>
<TABLE CLASS="dtArg" CELLSPACING="0">
  <TH WIDTH="1%"><P CLASS="Base2"><B>Parameter</B></P>
  <TH WIDTH="20%"><P CLASS="Base2"><B>Type</B></P>
  <TH WIDTH="50%"><P CLASS="Base2"><B>Description</B></P>
  <TR>
    <TD><P CLASS="Base2">AMODULID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">AEIRSALIYEID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
</TABLE>
<P CLASS="Base">&nbsp;</P>
<P CLASS="Header1">Output Parameters</P>
<TABLE CLASS="dtArg" CELLSPACING="0">
  <TH WIDTH="1%"><P CLASS="Base2"><B>Parameter</B></P>
  <TH WIDTH="20%"><P CLASS="Base2"><B>Type</B></P>
  <TH WIDTH="50%"><P CLASS="Base2"><B>Description</B></P>
  <TR>
    <TD><P CLASS="Base2">MODULID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">IRSALIYEDETAYID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">IRSALIYEID</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URUNID</TD>
    <TD><P CLASS="Base2">VARCHAR(80)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URUNADI</TD>
    <TD><P CLASS="Base2">VARCHAR(525)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BRUTMIKTAR</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">NETMIKTAR</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BRUTKILO</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">NETKILO</TD>
    <TD><P CLASS="Base2">NUMERIC(12,3)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MIKTAR</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">TARTIBRUTMIKTAR</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">METRE</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MUSTERISIPARISNO</TD>
    <TD><P CLASS="Base2">VARCHAR(75)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BIRIM</TD>
    <TD><P CLASS="Base2">VARCHAR(5)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPARISNO</TD>
    <TD><P CLASS="Base2">VARCHAR(30)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">NOTU</TD>
    <TD><P CLASS="Base2">BLOB SUB_TYPE 1 SEGMENT SIZE 80</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">LOT</TD>
    <TD><P CLASS="Base2">VARCHAR(255)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">URETIMPARTINO</TD>
    <TD><P CLASS="Base2">VARCHAR(60)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAREKETTIPI</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">RECETEKODUADI</TD>
    <TD><P CLASS="Base2">VARCHAR(64)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">DESENKODU</TD>
    <TD><P CLASS="Base2">VARCHAR(124)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPPROSESVEILAVEISLEMLER</TD>
    <TD><P CLASS="Base2">VARCHAR(512)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SATISFASON</TD>
    <TD><P CLASS="Base2">VARCHAR(40)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">KAPADEDI</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">TRANSFERKODU</TD>
    <TD><P CLASS="Base2">VARCHAR(80)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MELANJKODU</TD>
    <TD><P CLASS="Base2">VARCHAR(20)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MUSTERIKALITEADI</TD>
    <TD><P CLASS="Base2">VARCHAR(70)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">REFERANSSIPARISNO</TD>
    <TD><P CLASS="Base2">VARCHAR(30)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">GIBENTEGRASYONID</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPARISGRUPADI</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPARISGRUP2ADI</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPARISGRUP3ADI</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPARISGRUP4ADI</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HACIMEN</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMSTOKMASTERIDSTR</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">KALITENO</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BASKITIPIADI</TD>
    <TD><P CLASS="Base2">VARCHAR(40)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPPUS</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPFEINE</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ENISTENEN</TD>
    <TD><P CLASS="Base2">VARCHAR(10)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">GRAMAJISTENEN</TD>
    <TD><P CLASS="Base2">VARCHAR(10)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">OZELAPRELER</TD>
    <TD><P CLASS="Base2">VARCHAR(255)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMADI2</TD>
    <TD><P CLASS="Base2">VARCHAR(275)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMADI3</TD>
    <TD><P CLASS="Base2">VARCHAR(275)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">HAMADI4</TD>
    <TD><P CLASS="Base2">VARCHAR(275)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">GIRISPUS</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">MUSTERIRENKKODUVEADI</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">KALITEID</TD>
    <TD><P CLASS="Base2">VARCHAR(20)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">KALITEADI</TD>
    <TD><P CLASS="Base2">VARCHAR(255)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ADET</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SATISTRANSFERKODU</TD>
    <TD><P CLASS="Base2">VARCHAR(55)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ISLEMGRUBUADI</TD>
    <TD><P CLASS="Base2">VARCHAR(20)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">YURTDISISTR</TD>
    <TD><P CLASS="Base2">VARCHAR(20)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">VADEGUN</TD>
    <TD><P CLASS="Base2">INTEGER</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">DOVIZID</TD>
    <TD><P CLASS="Base2">VARCHAR(5)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SIPARISBIRIMFIYAT</TD>
    <TD><P CLASS="Base2">DOUBLE PRECISION</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">BELGEHAMADI</TD>
    <TD><P CLASS="Base2">VARCHAR(255)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">PONO</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">SASNO</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">DESENCALISMANO</TD>
    <TD><P CLASS="Base2">VARCHAR(50)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
  <TR>
    <TD><P CLASS="Base2">ARTIKELNO</TD>
    <TD><P CLASS="Base2">VARCHAR(20)</TD>
    <TD><P CLASS="Base2">&nbsp;</TD>
  </TR>
</TABLE>
<P CLASS="Base">&nbsp;</P>
<P CLASS="Header1">Description</P>
<P CLASS="Base"><I>(There is no description for procedure EIRSALIYEENTICINIRSDETGETIR)</I></P>
<P CLASS="Base">&nbsp;</P>
<P CLASS="Header1">Definition</P>
<P CLASS="Base"><span class="DDLCode">
<code><pre>
<b>CREATE</b><b> </b><b>PROCEDURE</b><b> </b><font color="# 080 0"><u>EIRSALIYEENTICINIRSDETGETIR</u></font><b>(</b>
<b>    </b>AMODULID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>AEIRSALIYEID<b> </b><b>INTEGER</b><b>)</b>
<b>RETURNS</b><b> </b><b>(</b>
<b>    </b>MODULID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>IRSALIYEDETAYID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>IRSALIYEID<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>URUNID<b> </b><b>VARCHAR</b><b>(</b>80<b>)</b><b>,</b>
<b>    </b>URUNADI<b> </b><b>VARCHAR</b><b>(</b>525<b>)</b><b>,</b>
<b>    </b>BRUTMIKTAR<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>NETMIKTAR<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>BRUTKILO<b> </b><b>TYPE</b><b> </b><b>OF</b><b> </b><b>COLUMN</b><b> </b><font color="# 080 0"><u>BOYAIRSALIYEDETAY</u></font><b>.</b>BRUTKILO<b>,</b>
<b>    </b>NETKILO<b> </b><b>TYPE</b><b> </b><b>OF</b><b> </b><b>COLUMN</b><b> </b><font color="# 080 0"><u>BOYAIRSALIYEDETAY</u></font><b>.</b>KILO<b>,</b>
<b>    </b>MIKTAR<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>TARTIBRUTMIKTAR<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>METRE<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>MUSTERISIPARISNO<b> </b><b>VARCHAR</b><b>(</b>75<b>)</b><b>,</b>
<b>    </b><font color="# 080 0"><u>BIRIM</u></font><b> </b><b>VARCHAR</b><b>(</b>5<b>)</b><b>,</b>
<b>    </b>SIPARISNO<b> </b><b>VARCHAR</b><b>(</b>30<b>)</b><b>,</b>
<b>    </b>NOTU<b> </b><b>BLOB</b><b> </b><b>SUB_TYPE</b><b> </b>1<b> </b><b>SEGMENT</b><b> </b><b>SIZE</b><b> </b>80<b>,</b>
<b>    </b>LOT<b> </b><b>VARCHAR</b><b>(</b>255<b>)</b><b>,</b>
<b>    </b>URETIMPARTINO<b> </b><b>VARCHAR</b><b>(</b>60<b>)</b><b>,</b>
<b>    </b>HAREKETTIPI<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>RECETEKODUADI<b> </b><b>VARCHAR</b><b>(</b>64<b>)</b><b>,</b>
<b>    </b>DESENKODU<b> </b><b>VARCHAR</b><b>(</b>124<b>)</b><b>,</b>
<b>    </b>SIPPROSESVEILAVEISLEMLER<b> </b><b>VARCHAR</b><b>(</b>512<b>)</b><b>,</b>
<b>    </b>SATISFASON<b> </b><b>VARCHAR</b><b>(</b>40<b>)</b><b>,</b>
<b>    </b>KAPADEDI<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>TRANSFERKODU<b> </b><b>VARCHAR</b><b>(</b>80<b>)</b><b>,</b>
<b>    </b>MELANJKODU<b> </b><b>TYPE</b><b> </b><b>OF</b><b> </b><b>COLUMN</b><b> </b><font color="# 080 0"><u>IPLIKIRSALIYEDETAY</u></font><b>.</b>MELANJKODU<b>,</b>
<b>    </b>MUSTERIKALITEADI<b> </b><b>VARCHAR</b><b>(</b>70<b>)</b><b>,</b>
<b>    </b>REFERANSSIPARISNO<b> </b><b>VARCHAR</b><b>(</b>30<b>)</b><b>,</b>
<b>    </b>GIBENTEGRASYONID<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>SIPARISGRUPADI<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>SIPARISGRUP2ADI<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>SIPARISGRUP3ADI<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>SIPARISGRUP4ADI<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>HACIMEN<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>HAMSTOKMASTERIDSTR<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>KALITENO<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>BASKITIPIADI<b> </b><b>VARCHAR</b><b>(</b>40<b>)</b><b>,</b>
<b>    </b>SIPPUS<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>SIPFEINE<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>ENISTENEN<b> </b><b>VARCHAR</b><b>(</b>10<b>)</b><b>,</b>
<b>    </b>GRAMAJISTENEN<b> </b><b>VARCHAR</b><b>(</b>10<b>)</b><b>,</b>
<b>    </b>OZELAPRELER<b> </b><b>VARCHAR</b><b>(</b>255<b>)</b><b>,</b>
<b>    </b>HAMADI2<b> </b><b>VARCHAR</b><b>(</b>275<b>)</b><b>,</b>
<b>    </b>HAMADI3<b> </b><b>VARCHAR</b><b>(</b>275<b>)</b><b>,</b>
<b>    </b>HAMADI4<b> </b><b>VARCHAR</b><b>(</b>275<b>)</b><b>,</b>
<b>    </b>GIRISPUS<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>MUSTERIRENKKODUVEADI<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>KALITEID<b> </b><b>VARCHAR</b><b>(</b>20<b>)</b><b>,</b>
<b>    </b>KALITEADI<b> </b><b>VARCHAR</b><b>(</b>255<b>)</b><b>,</b>
<b>    </b>ADET<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>SATISTRANSFERKODU<b> </b><b>TYPE</b><b> </b><b>OF</b><b> </b><b>COLUMN</b><b> </b><font color="# 080 0"><u>HAM</u></font><b>.</b>SATISTRANSFERKODU<b>,</b>
<b>    </b>ISLEMGRUBUADI<b> </b><b>VARCHAR</b><b>(</b>20<b>)</b><b>,</b>
<b>    </b>YURTDISISTR<b> </b><b>VARCHAR</b><b>(</b>20<b>)</b><b>,</b>
<b>    </b>VADEGUN<b> </b><b>INTEGER</b><b>,</b>
<b>    </b>DOVIZID<b> </b><b>VARCHAR</b><b>(</b>5<b>)</b><b>,</b>
<b>    </b>SIPARISBIRIMFIYAT<b> </b><b>DOUBLE</b><b> </b><b>PRECISION</b><b>,</b>
<b>    </b>BELGEHAMADI<b> </b><b>VARCHAR</b><b>(</b>255<b>)</b><b>,</b>
<b>    </b>PONO<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>SASNO<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>DESENCALISMANO<b> </b><b>VARCHAR</b><b>(</b>50<b>)</b><b>,</b>
<b>    </b>ARTIKELNO<b> </b><b>VARCHAR</b><b>(</b>20<b>)</b><b>)</b>
<b>AS</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FCDataUygula<b>       </b><b>SmallInt</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FPartiSinifId<b>      </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FRafDetayID<b>        </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FBoyaSiparisYil<b>    </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FBoyaSiparisId<b>     </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FPartiYil<b>          </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FPartiID<b>           </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FFasonHamIade<b>      </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FFason<b>             </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FFaturaMiktarTipi<b>  </b><b>integer</b><b>;</b>


<b>declare</b><b> </b><b>variable</b><b> </b>FFirmaKodumuz<b>      </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>FirmaKodumuz<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FOrmeFirmaKodumuz<b>  </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>OrmeFirmaKodumuz<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FIplikFirmaKodumuz<b> </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>IplikFirmaKodumuz<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FEgemenFirmaId<b>     </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>EgemenFirmaId<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FHamStokBirimid<b>    </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>HamStokBirimid<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FFirmaId<b>           </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>Firma</u></font><b>.</b>FirmaId<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FBrutMetre<b>         </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BrutMetre<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FNetMetre<b>          </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BrutMetre<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FIslemTipiId<b>       </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>IslemTipi</u></font><b>.</b>IslemTipiId<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FUcretliTamir<b>      </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>UcretliTamir<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FEnistenen<b>         </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>Enistenen<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FGramajIstenen<b>     </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>GramajIstenen<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FMaliyetGrubu<b>      </b><b>varchar</b><b>(</b>4<b>)</b><b>;</b>

<b>declare</b><b> </b><b>variable</b><b> </b>FPartiBrutMiktar<b>   </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BrutMiktar<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FLabReceteId<b>       </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>LabReceteId<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FLabReceteAtisId<b>   </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>LabReceteAtisId<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FSipLabReceteAtisMaliyetiTl<b> </b><b>double</b><b> </b><b>precision</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FAdet<b>              </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>Adet<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FPartiSiraNo<b>       </b><b>integer</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FSiparisProsesAdi2<b> </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>SIPARISPROSES</u></font><b>.</b>ADI2<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FHamTipiId<b>         </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamTipiId<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FBelgeHamAdi<b>       </b><b>varchar</b><b>(</b>150<b>)</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FSiparisFirmaId<b>    </b><b>varchar</b><b>(</b>20<b>)</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FSiparisGrup1Id<b>    </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BOYASIPARIS</u></font><b>.</b>SIPARISGRUPID<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FStokHareketGrupId<b> </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>STOKHAREKETGRUP</u></font><b>.</b>STOKHAREKETGRUPID<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FYurtDisi<b>          </b><b>smallint</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FAciklama<b> </b><b>varchar</b><b>(</b>255<b>)</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FSiparisGrupDetayAdi<b> </b><b>varchar</b><b>(</b>30<b>)</b><b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FSipDetayTransferKodu<b> </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>SipDetayTransferKodu<b>;</b>
<b>declare</b><b> </b><b>variable</b><b> </b>FHamTanitimNotu<b> </b><b>type</b><b> </b><b>of</b><b> </b><b>column</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Notu<b>;</b>
<b>begin</b>
<b>  </b><b>Select</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>FirmaKodumuz<b>,</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>OrmeFirmaKodumuz<b>,</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>IplikFirmaKodumuz<b>,</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>EgemenFirmaId<b> </b><b>From</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b> </b><b>Where</b><b> </b><font color="# 080 0"><u>Sistem</u></font><b>.</b>SistemId<b> </b><b>=</b><b> </b>1<b> </b><b>Into</b><b> </b>:FFirmaKodumuz<b>,</b><b> </b>:FOrmeFirmaKodumuz<b>,</b><b> </b>:FIplikFirmaKodumuz<b>,</b><b> </b>:FEgemenFirmaId<b> </b><b>;</b>
<b>  </b>ModulId<b> </b><b>=</b><b> </b>:aModulID<b>;</b>

<b>  </b>FCDataUygula<b> </b><b>=</b><b> </b>1<b> </b><b>;</b>
<b>  </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>12<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>2<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/*Şevkat,BatıBasma*/</i></font>
<b>    </b>FCDataUygula<b> </b><b>=</b><b> </b>0<b> </b><b>;</b>

<b>  </b><b>if</b><b> </b><b>(</b>ModulID<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>--&gt; BoyaIrsaliyeDetayiGetir</i></font>
<b>  </b><b>begin</b>
<b>    </b><b>for</b><b> </b><b>select</b>
<b>          </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BoyaIrsaliyeDetayId<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BoyaIrsaliyeId<b>,</b><b> </b><b>cast</b><b>(</b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>HamId<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>80<b>)</b><b>)</b><b> </b><b>,</b>
<b>          </b><b>case</b><b> </b><b>when</b><b> </b><b>coalesce</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BelgeHamAdi<b>,</b>''<b>)</b><b>&lt;</b><b>&gt;</b>''<b> </b><b>then</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BelgeHamAdi<b> </b><b>else</b><b> </b><b>left</b><b>(</b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi<b>,</b><b> </b>255<b>)</b><b> </b><b>end</b><b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi2<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi3<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi4<b>,</b>
<b>          </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BrutKilo<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>Kilo<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BrutMetre<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>Metre<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>Metre<b>,</b>
<b>          </b><b>Coalesce</b><b>(</b>RS<b>.</b>MusteriSiparisNo<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>MusteriSiparisNo<b>)</b><b>,</b><b> </b><b>iif</b><b>(</b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>PartiSinifId<b> </b><b>is</b><b> </b><b>null</b><b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>DefaultHamStokBirimId<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>HamStokBirimid<b>)</b><b>,</b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>HareketTipiId<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>PartiSinifId<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>RafDetayId<b>,</b>
<b>          </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisYil<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisID<b>,</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>PartiYil<b>,</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>PartiId<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>FasonHamIade<b>,</b>
<b>          </b><b>iif</b><b>(</b>:FEgemenFirmaId<b>=</b><b> </b>2<b>,</b><b>coalesce</b><b>(</b><font color="# 080 0"><u>Recete</u></font><b>.</b>ReceteId<b>,</b>''<b>)</b><b>,</b><b>case</b><b> </b><b>when</b><b> </b><b>coalesce</b><b>(</b><font color="# 080 0"><u>Recete</u></font><b>.</b>ReceteId<b>,</b>''<b>)</b><b>&lt;</b><b>&gt;</b>''<b> </b><b>then</b><b> </b><font color="# 080 0"><u>Recete</u></font><b>.</b>ReceteId<b> </b><b>|</b><b>|</b>'-'<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>Recete</u></font><b>.</b>Adi<b> </b><b>else</b><b> </b><b>left</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>RenkAdi<b>,</b>40<b>)</b><b> </b><b>end</b><b>)</b><b>,</b>
<b>          </b><font color="# 080 0"><u>Desen</u></font><b>.</b>DesenId<b> </b><b>|</b><b>|</b><b> </b>' '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>DesenVaryant</u></font><b>.</b>VaryantAdi<b> </b><b>|</b><b>|</b><b> </b>' '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>Desen</u></font><b>.</b>Adi<b>,</b>
<b>          </b><b>iif</b><b>(</b>:FEgemenFirmaId<b>=</b><b> </b>130<b>,</b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>SiparisProses</u></font><b>.</b>Adi2<b>,</b>''<b>)</b><b> </b><b>,</b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>SiparisProses</u></font><b>.</b>Adi<b>,</b>''<b>)</b><b> </b><b>|</b><b>|</b><b> </b>' '<b> </b><b>|</b><b>|</b><b> </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b><font color="# 080 0"><u>IlaveIslemler</u></font><b>,</b>''<b>)</b><b>)</b><b>,</b>
<b>          </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>Fason<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>KapAdedi<b>,</b><b> </b><font color="# 080 0"><u>MiktarTipi</u></font><b>.</b>MiktarTipiId<b>,</b><b> </b><b>Case</b><b> </b><b>when</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>Fason<b> </b><b>=</b><b> </b>1<b> </b><b>then</b><b>  </b><font color="# 080 0"><u>Ham</u></font><b>.</b>FasonTransferKodu<b> </b><b>else</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>SatisTransferKodu<b> </b><b>end</b><b>,</b>
<b>          </b><b>iif</b><b>(</b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>PartiSinifId<b> </b><b>is</b><b> </b><b>null</b><b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>DefaultHamStokBirimId<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>HamStokBirimid<b>)</b><b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliye</u></font><b>.</b>FirmaId<b>,</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>IslemTipiId<b>,</b><b> </b><font color="# 080 0"><u>Boyasiparisdetay</u></font><b>.</b>UcretliTamir<b>,</b>
<b>          </b><b>Coalesce</b><b>(</b><b>trim</b><b>(</b><font color="# 080 0"><u>Boyasiparisdetay</u></font><b>.</b>EnIstenen<b>)</b><b>,</b>''<b>)</b><b>,</b><b> </b><b>coalesce</b><b>(</b><b>trim</b><b>(</b><font color="# 080 0"><u>Boyasiparisdetay</u></font><b>.</b>GramajIstenen<b>)</b><b>,</b><b> </b>''<b> </b><b>)</b><b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>LabReceteId<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>LabReceteAtisId<b>,</b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>Adet<b>,</b><b> </b>SG1<b>.</b>Adi<b>,</b><b> </b>SG2<b>.</b>Adi<b>,</b>SG3<b>.</b>Adi<b>,</b>SG4<b>.</b>Adi<b>,</b>
<b>          </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>MusteriKaliteNo<b>,</b>''<b>)</b><b> </b><b>|</b><b>|</b><b> </b>'/'<b> </b><b>|</b><b>|</b><b> </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>MusteriKaliteAdi<b>,</b>''<b>)</b><b>,</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>PartiSiraNo<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>ReferansSiparisNo<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliye</u></font><b>.</b>GibEntegrasyonId<b>,</b>
<b>          </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>BaskiTipi</u></font><b>.</b>adi<b>,</b>''<b>)</b><b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BrutMiktar<b>,</b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>HacimEn<b>,</b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>KaliteNo<b>,</b>
<b>          </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>OzelApreler<b>,</b>''<b>)</b><b>,</b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>FirmaID<b>,</b>SG1<b>.</b>SiparisGrupId<b>,</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>Pus<b>,</b>
<b>          </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>Feine<b>,</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>MusteriRenkKoduVeAdi<b>,</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>KaliteId<b>,</b><font color="# 080 0"><u>Kalite</u></font><b>.</b>KaliteAdi<b>,</b><font color="# 080 0"><u>BoyaIrsaliye</u></font><b>.</b>IrsaliyeGrupId<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>SatisTransferKodu<b>,</b>
<b>          </b><font color="# 080 0"><u>IslemGrubu</u></font><b>.</b>Adi<b>,</b><b>Coalesce</b><b>(</b>RBS<b>.</b>YurtDisi<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>YurtDisi<b>)</b><b> </b><b>,</b><b> </b><b>Coalesce</b><b>(</b>RS<b>.</b>BirimFiyat<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BirimFiyat<b>)</b><b>,</b>
<b>          </b><b>Coalesce</b><b>(</b>RS<b>.</b>DovizId<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>DovizId<b>)</b><b>,</b><b> </b><b>Coalesce</b><b>(</b>RS<b>.</b>VadeGun<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>VadeGun<b>)</b><b>,</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b>.</b>Adi<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>SipDetayTransferKodu<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Notu<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>PoNo<b>,</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b><b> </b>SasNo<b>,</b><b> </b><font color="# 080 0"><u>Desen</u></font><b>.</b>CalismaNo

<b>    </b><b>from</b><b>  </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font>
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaIrsaliye</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaIrsaliye</u></font><b>.</b>BoyaIrsaliyeId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BoyaIrsaliyeId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Hamid<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyairsaliyeDetay</u></font><b>.</b>Hamid
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>PartiSinifId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>PartiSinifId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Parti</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>PartiKayitId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>PartiKayitId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BoyaSiparisDetayId<b> </b><b>=</b><b> </b><b>coalesce</b><b>(</b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>BoyaSiparisDetayId<b>,</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BoyaSiparisDetayId<b>)</b>
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisKayitId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BoyaSiparisKayitId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaRezervFisiDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaRezervFisiDetay</u></font><b>.</b>BoyaRezervFisiDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BoyaRezervFisiDetayId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b> </b>RS<b> </b><b>on</b><b> </b>RS<b>.</b>BoyaSiparisDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaRezervFisiDetay</u></font><b>.</b>BoyaSiparisDetayId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b> </b>RBS<b> </b><b>on</b><b> </b>RBS<b>.</b>BoyaSiparisKayitId<b> </b><b>=</b><b> </b>RS<b>.</b>BoyaSiparisKayitId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>MiktarTipi</u></font><b> </b><b>On</b><b> </b><font color="# 080 0"><u>MiktarTipi</u></font><b>.</b>MiktarTipiId<b> </b><b>=</b><b> </b><b>Coalesce</b><b>(</b>RS<b>.</b>FaturaEdilecekMiktarTipi<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>FaturaEdilecekMiktarTipi<b>)</b>
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>HamStokBirimId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>HamStokBirimid
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Recete</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Recete</u></font><b>.</b>ReceteId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>ReceteId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>DesenVaryant</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>DesenVaryant</u></font><b>.</b>DesenVaryantId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>DesenVaryantId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Desen</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Desen</u></font><b>.</b>DesenId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>DesenVaryant</u></font><b>.</b>DesenId
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisProses</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>SiparisProses</u></font><b>.</b>SiparisProsesId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>SiparisProsesId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BaskiTipi</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BaskiTipi</u></font><b>.</b>BaskiTipiId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BaskiTipiId
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b>SG1<b> </b><b>on</b><b> </b>SG1<b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>SiparisGrupId
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b>SG2<b> </b><b>on</b><b> </b>SG2<b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>SiparisGrup2Id
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b>SG3<b> </b><b>on</b><b> </b>SG3<b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>SiparisGrup3Id
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b>SG4<b> </b><b>on</b><b> </b>SG4<b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>SiparisGrup4Id
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Kalite</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Kalite</u></font><b>.</b>KaliteId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>KaliteId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>IslemGrubu</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>IslemGrubu</u></font><b>.</b>IslemGrubuId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>IslemGrubuId
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>SiparisDetayGrupId
<b>    </b><b>where</b><b> </b><font color="# 080 0"><u>BoyaIrsaliyeDetay</u></font><b>.</b>BoyaIrsaliyeId<b> </b><b>=</b><b> </b>:aEIrsaliyeID
<b>    </b><b>into</b><b>  </b>:IrsaliyeDetayID<b>,</b><b> </b>:IrsaliyeId<b>,</b><b> </b>:UrunID<b>,</b><b> </b>:UrunAdi<b>,</b><b> </b>:HamAdi2<b>,</b><b> </b>:HamAdi3<b>,</b><b> </b>:HamAdi4<b>,</b>
<b>          </b>:BrutKilo<b>,</b><b> </b>:NetKilo<b>,</b><b> </b>:FBrutMetre<b>,</b><b> </b>:FNetMetre<b>,</b><b> </b>:Metre<b>,</b><b> </b>:MusteriSiparisNo<b>,</b><b> </b>:Birim<b>,</b>
<b>          </b>:HareketTipi<b>,</b><b> </b>:FPartiSinifId<b>,</b><b> </b>:FRafDetayID<b>,</b>
<b>          </b>:FBoyaSiparisYil<b>,</b><b> </b>:FBoyaSiparisID<b>,</b><b> </b>:FPartiYil<b>,</b><b> </b>:FPartiID<b>,</b><b> </b>:FFasonHamIade<b>,</b>
<b>          </b>:ReceteKoduAdi<b>,</b><b> </b>:DesenKodu<b>,</b><b> </b>:SipProsesveIlaveIslemler<b>,</b>
<b>          </b>:FFason<b>,</b><b> </b>:KapAdedi<b>,</b><b> </b>:FFaturaMiktarTipi<b>,</b><b> </b>:TransferKodu<b>,</b><b> </b>:FHamStokBirimid<b>,</b><b> </b>:FFirmaId<b>,</b><b> </b>:FIslemTipiid<b>,</b><b> </b>:FUcretlitamir<b>,</b>
<b>          </b>:Enistenen<b>,</b><b> </b>:Gramajistenen<b>,</b><b> </b>:FLabReceteId<b>,</b><b> </b>:FLabReceteAtisId<b>,</b><b> </b>:FAdet<b>,</b>
<b>          </b>:SiparisGrupAdi<b>,</b><b> </b>:SiparisGrup2Adi<b>,</b><b> </b>:SiparisGrup3Adi<b>,</b><b> </b>:SiparisGrup4Adi<b>,</b>:MusteriKaliteAdi<b>,</b>
<b>          </b>:FPartiSiraNo<b>,</b><b> </b>:ReferansSiparisNo<b>,</b><b> </b>:GibEntegrasyonId<b>,</b><b> </b>:BaskiTipiAdi<b>,</b><b> </b>:FPartiBrutMiktar<b>,</b><b> </b>:HacimEn<b>,</b><b> </b>:KaliteNo<b>,</b><b> </b>:OzelApreler<b>,</b>
<b>          </b>:FSiparisFirmaId<b>,</b><b> </b>FSiparisGrup1Id<b>,</b><b> </b>:SipPus<b>,</b><b> </b>:SipFeine<b>,</b><b> </b>:MusteriRenkKoduVeAdi<b>,</b><b> </b>:KaliteId<b>,</b><b> </b>:KaliteAdi<b>,</b><b> </b>:FStokHareketGrupId<b>,</b><b> </b>:SatisTransferKodu<b>,</b>
<b>          </b>:IslemGrubuAdi<b>,</b><b> </b>:FYurtDisi<b>,</b><b> </b>:SiparisBirimFiyat<b>,</b><b> </b>:DovizId<b>,</b><b> </b>:VadeGun<b>,</b><b> </b>:FSiparisGrupDetayAdi<b>,</b><b> </b>:FSipDetayTransferKodu<b>,</b><b> </b>:FHamTanitimNotu<b>,</b><b> </b>:PoNo<b>,</b><b> </b>:SasNo<b>,</b><b> </b>:DesenCalismaNo<b>  </b><b>do</b>

<b>    </b><b>begin</b>
<b>      </b><font color="# 0 0FF"><i>--Yurt Dışı</i></font>
<b>      </b><b>if</b><b>   </b><b>(</b>FYurtDisi<b> </b><b>=</b><b> </b>0<b>)</b><b>  </b><b>then</b><b> </b>YurtDisiStr<b> </b><b>=</b><b> </b>'İç Piyasa'<b>;</b><b>  </b><b>else</b><b> </b>YurtDisiStr<b> </b><b>=</b><b> </b>'Yurt Dışı'<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>--Fason Ham İade ve Ham Satışlar İçin</i></font>
<b>      </b><b>if</b><b> </b><b>(</b><font color="# 080 0"><u>Birim</u></font><b> </b><b>=</b><b> </b>0<b>)</b><b>      </b><b>then</b><b> </b><font color="# 080 0"><u>Birim</u></font><b> </b><b>=</b><b> </b>'Kg'<b> </b><b>;</b>
<b>      </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><font color="# 080 0"><u>Birim</u></font><b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b><b> </b><font color="# 080 0"><u>Birim</u></font><b> </b><b>=</b><b> </b>'Mt'<b> </b><b>;</b>
<b>      </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><font color="# 080 0"><u>Birim</u></font><b> </b><b>=</b><b> </b>2<b>)</b><b> </b><b>then</b><b> </b><font color="# 080 0"><u>Birim</u></font><b> </b><b>=</b><b> </b>'Ad'<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>-- Tartıdan Brüt Miktarın Alınması</i></font>
<b>      </b><b>Select</b><b> </b><b>Sum</b><b>(</b><font color="# 080 0"><u>PartiStokTarti</u></font><b>.</b>Kilo<b> </b><b>+</b><b> </b><font color="# 080 0"><u>PartiStokTarti</u></font><b>.</b>Dara<b>)</b><b> </b><b>from</b><b> </b><font color="# 080 0"><u>PartiStokTarti</u></font><b> </b><b>where</b><b> </b><font color="# 080 0"><u>PartiStokTarti</u></font><b>.</b>BoyaIrsaliyeDetayId<b> </b><b>=</b><b> </b>:IrsaliyeDetayID<b> </b><b>into</b><b>  </b>:TartiBrutMiktar<b>;</b>

<b>      </b><font color="# 0 0FF"><i>-- Kg Miktar Hesaplanması</i></font>
<b>      </b><b>if</b><b> </b><b>(</b>FHamStokBirimId<b> </b><b>=</b><b> </b>0<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b><b>if</b><b> </b><b>(</b>FFason<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/* Satışlarda Net Kilo gösterilmesi istendiğinden Brütü sıfıra çekiyorum */</i></font>
<b>        </b><b>begin</b>
<b>          </b><font color="# 0 0FF"><i>/*Akın Raşel, Bteks,NurYıldız,Spectro,Miray,Şevkat,Boybo,Palben,Assos,Naz Örme, Sadırlar (Aysim İçin), Tekboy*/</i></font>
<b>          </b><b>if</b><b>  </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>6<b>  </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>133<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>0<b>  </b><b>or</b><b>  </b>FEgemenFirmaId<b> </b><b>=</b>102<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>124<b> </b><b>or</b>
<b>               </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>12<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>60<b>  </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>61<b> </b><b>or</b><b>  </b>FEgemenFirmaId<b> </b><b>=</b>123<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>52<b>  </b><b>or</b>
<b>               </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>120<b> </b><b>and</b><b> </b>FFirmaId<b> </b><b>=</b>'1101'<b>)</b><b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>16<b>)</b><b> </b><b>then</b>

<b>          </b><b>begin</b>
<b>		    </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b>0<b>)</b><b> </b><b>then</b><b>  </b><font color="# 0 0FF"><i>--NurYıldız</i></font>
<b>              </b>BrutMiktar<b> </b><b>=</b><b> </b>TartiBrutMiktar<b>;</b>
<b>            </b><b>else</b>
<b>			  </b>BrutMiktar<b> </b><b>=</b><b> </b>BrutKilo<b> </b><b>;</b>
<b>			  </b>NetMiktar<b>  </b><b>=</b><b> </b>NetKilo<b> </b><b>;</b>
<b>          </b><b>end</b>
<b>          </b><b>else</b>
<b>          </b><b>begin</b>
<b>            </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b> </b><b>;</b>
<b>            </b>NetMiktar<b>  </b><b>=</b><b> </b>NetKilo<b> </b><b>;</b>
<b>          </b><b>end</b>
<b>        </b><b>end</b>
<b>        </b><b>else</b><b>  </b><font color="# 0 0FF"><i>/* Fasonda hem Brüt hem net gösterilmek isteniyor. */</i></font>
<b>        </b><b>begin</b>
<b>          </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>130<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/*Merboy*/</i></font>
<b>          </b><b>begin</b>
<b>            </b>BrutMiktar<b> </b><b>=</b><b> </b>FPartiBrutMiktar<b> </b><b>;</b>
<b>            </b>NetMiktar<b>  </b><b>=</b><b> </b>NetKilo<b> </b><b>;</b>
<b>          </b><b>end</b>
<b>          </b><b>else</b>
<b>          </b><b>begin</b>
<b>            </b>BrutMiktar<b> </b><b>=</b><b> </b>BrutKilo<b> </b><b>;</b>
<b>            </b>NetMiktar<b>  </b><b>=</b><b> </b>NetKilo<b>  </b><b>;</b>
<b>          </b><b>end</b>
<b>        </b><b>end</b>

<b>        </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>75<b> </b><b>or</b><b>  </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>30<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/*Mersu , Kumaş Boya*/</i></font>
<b>        </b><b>begin</b>
<b>          </b><b>if</b><b> </b><b>(</b>FFirmaID<b> </b><b>=</b><b> </b>FSiparisFirmaId<b> </b><b>)</b><b> </b><b>then</b>
<b>            </b>FFaturaMiktarTipi<b> </b><b>=</b><b> </b>:FFaturaMiktarTipi<b>;</b>
<b>          </b><b>else</b>
<b>            </b><b>Select</b><b> </b><font color="# 080 0"><u>Firma</u></font><b>.</b>FaturaEdilecekMiktarTipi<b> </b><b>from</b><b> </b><font color="# 080 0"><u>Firma</u></font><b> </b><b>Where</b><b> </b><font color="# 080 0"><u>Firma</u></font><b>.</b>FirmaId<b> </b><b>=</b>:FFirmaID<b>  </b><b>into</b><b>  </b>:FFaturaMiktarTipi<b>;</b>

<b>          </b><b>if</b><b>(</b>FFaturaMiktarTipi<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b>
<b>          </b><b>begin</b>
<b>            </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b> </b><b>;</b><b>         </b><font color="# 0 0FF"><i>/* Irsaliye Netten Hesaplandığı için BrütMiktar'ı Sıfırlıyorum */</i></font>
<b>            </b>NetMiktar<b>  </b><b>=</b><b> </b>NetKilo<b> </b><b>;</b>
<b>          </b><b>end</b>
<b>          </b><b>else</b>
<b>          </b><b>begin</b>
<b>            </b>BrutMiktar<b> </b><b>=</b><b> </b>TartiBrutMiktar<b> </b><b>;</b><b>  </b><font color="# 0 0FF"><i>/*  BrütMiktar için PartiStokTartıdan Kilo ve Darayı Sumluyorum */</i></font>
<b>            </b>NetMiktar<b>  </b><b>=</b><b> </b>0<b> </b><b>;</b><b>                </b><font color="# 0 0FF"><i>/*  Irsaliye Brütten Hesaplandıgında NetMiktar'ı Sıfırlıyorum   */</i></font>
<b>          </b><b>end</b>
<b>        </b><b>end</b>

<b>        </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>78<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/*Mt Bilgisi Mt Satışlarda Kg olarak kullanıldığı için düzenledim*/</i></font>
<b>        </b><b>begin</b>
<b>          </b>Metre<b>  </b><b>=</b><b>  </b>FNetMetre<b> </b><b>;</b>
<b>        </b><b>end</b>
<b>      </b><b>end</b>
<b>      </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FHamStokBirimId<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b><b>if</b><b>(</b>FFason<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b><b>            </b><font color="# 0 0FF"><i>/* Satışlarda Net Metre gösterilmesi istendiğinden Brütü sıfıra çekiyorum */</i></font>
<b>        </b><b>begin</b>
<b>          </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b> </b><b>;</b>
<b>          </b>NetMiktar<b>  </b><b>=</b><b> </b>FNetMetre<b> </b><b>;</b>
<b>        </b><b>end</b>
<b>        </b><b>else</b>
<b>        </b><b>begin</b>
<b>          </b>BrutMiktar<b> </b><b>=</b><b> </b>FBrutMetre<b> </b><b>;</b>
<b>          </b>NetMiktar<b>  </b><b>=</b><b> </b>FNetMetre<b> </b><b>;</b>
<b>        </b><b>end</b>

<b>        </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>78<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/*İstanbul Boyahanesi Kg ve Mt Bilgisi Aynı Anda Çıksın İsteniyor*/</i></font>
<b>        </b><b>begin</b>
<b>          </b><b>if</b><b>(</b>FStokHareketGrupId<b> </b><b>=</b><b> </b>50<b>)</b><b> </b><b>then</b>
<b>          </b><b>Begin</b>
<b>            </b>NetMiktar<b>       </b><b>=</b><b> </b>FNetMetre<b> </b><b>/</b><b> </b>2<b> </b><b>;</b>
<b>            </b>Metre<b>           </b><b>=</b><b> </b>NetKilo<b>  </b><b>/</b><b> </b>2<b> </b><b>;</b>
<b>            </b>TartiBrutMiktar<b> </b><b>=</b><b> </b>TartiBrutMiktar<b>  </b><b>/</b><b> </b>2<b> </b><b>;</b>
<b>          </b><b>end</b>
<b>          </b><b>else</b>
<b>            </b>NetMiktar<b> </b><b>=</b><b> </b>FNetMetre<b> </b><b>;</b>

<b>          </b>Metre<b> </b><b>=</b><b> </b>NetKilo<b> </b><b>;</b>
<b>        </b><b>end</b>
<b>     </b><b>else</b><b> </b><b>if</b><b>  </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>138<b> </b><b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>--Artesa  Kg ve Mt Bilgisi Aynı Anda Çıksın İsteniyor</i></font>
<b>        </b><b>begin</b>
<b>          </b><b>if</b><b>(</b>FFason<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b>
<b>          </b><b>begin</b>
<b>            </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b> </b><b>;</b>
<b>            </b>NetMiktar<b>  </b><b>=</b><b> </b>NetKilo<b> </b><b>;</b>
<b>          </b><b>end</b>
<b>          </b><b>else</b>
<b>          </b><b>begin</b>
<b>            </b>BrutMiktar<b> </b><b>=</b><b> </b>BrutKilo<b> </b><b>;</b>
<b>            </b>NetMiktar<b>  </b><b>=</b><b> </b>NetKilo<b> </b><b>;</b>
<b>          </b><b>end</b>
<b>        </b><b>end</b>
<b>      </b><b>end</b>
<b>      </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FHamStokBirimId<b> </b><b>=</b><b> </b>2<b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>BrutMiktar<b> </b><b>=</b><b> </b>FAdet<b> </b><b>;</b>
<b>        </b>NetMiktar<b>  </b><b>=</b><b> </b>FAdet<b> </b><b>;</b>
<b>      </b><b>end</b>
<b>      </b><b>else</b>
<b>      </b><b>begin</b>
<b>        </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b>;</b>
<b>        </b>NetMiktar<b>  </b><b>=</b><b> </b>0<b>;</b>
<b>      </b><b>end</b>

<b>      </b><font color="# 0 0FF"><i>-- Lot</i></font>
<b>      </b><b>if</b><b> </b><b>(</b>:FPartiSinifId<b> </b><b>is</b><b> </b><b>null</b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b><b>Select</b><b> </b><b>First</b><b> </b>1<b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>Lot<b> </b><b>,</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>Pus<b>,</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>HamStokMasterId<b> </b><b>from</b><b> </b><font color="# 080 0"><u>RafDetay</u></font>
<b>        </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokDetay</u></font><b>  </b><b>on</b><b> </b><font color="# 080 0"><u>HamStokDetay</u></font><b> </b><b>.</b>HamStokDetayID<b>   </b><b>=</b><b> </b><font color="# 080 0"><u>RafDetay</u></font><b>    </b><b>.</b>HamStokDetayId
<b>        </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>HamStokMasterID<b>  </b><b>=</b><b> </b><font color="# 080 0"><u>HamStokDetay</u></font><b>.</b>HamStokMasterId
<b>        </b><b>where</b><b> </b><font color="# 080 0"><u>RafDetay</u></font><b>.</b>RafDetayID<b> </b><b>=</b><b> </b>:fRafDetayID<b> </b><b>into</b><b> </b>:Lot<b>,</b><b> </b>:GirisPus<b>,</b><b> </b>:HamStokMasterIdStr<b>;</b>
<b>      </b><b>end</b>
<b>      </b><b>else</b>
<b>      </b><b>begin</b>
<b>        </b><b>if</b><b> </b><b>(</b>FIslemTipiId<b> </b><b>=</b><b> </b>3<b> </b><b>)</b><b> </b><b>then</b>
<b>        </b><b>begin</b>
<b>          </b><b>if</b><b> </b><b>(</b>FUcretlitamir<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b>
<b>            </b>SipProsesveIlaveIslemler<b> </b><b>=</b><b> </b>SipProsesveIlaveIslemler<b> </b><b>|</b><b>|</b><b> </b>' (Ücretsiz tamir)'<b> </b><b>;</b>
<b>          </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FUcretlitamir<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b>
<b>            </b>SipProsesveIlaveIslemler<b> </b><b>=</b><b> </b>SipProsesveIlaveIslemler<b> </b><b>|</b><b>|</b><b> </b>' (Ücretli tamir)'<b> </b><b>;</b>
<b>        </b><b>end</b>

<b>        </b><b>select</b><b> </b>HamStokMasterIdStr<b>,</b>GirisPus<b>,</b>GirisLot<b> </b><b>from</b><b> </b><font color="# 080 0"><u>PARTISTOKGIRISBILGISIGETIR</u></font><b> </b><b>(</b>:FPartiSinifId<b>)</b><b> </b><b>into</b><b> </b>:HamStokMasterIdStr<b>,</b><b> </b>:GirisPus<b>,</b><b> </b>:Lot<b>;</b>

<b>        </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b>12<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/*Şevkat*/</i></font>
<b>        </b><b>begin</b>
<b>          </b>FMaliyetGrubu<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>
<b>          </b><b>if</b><b> </b><b>(</b>FLabReceteAtisID<b> </b><b>is</b><b> </b><b>not</b><b> </b><b>null</b><b>)</b><b> </b><b>then</b>
<b>          </b><b>begin</b>
<b>            </b><b>Select</b><b> </b>BoyaMaliyetiTL<b> </b><b>+</b><b> </b>KimyasalMaliyetiTL<b> </b><b>from</b><b> </b><font color="# 080 0"><u>LabReceteAtisGetir2</u></font><b>(</b>:FLabReceteId<b>,</b><b> </b>:FLabReceteAtisID<b>,</b><b> </b>1<b>)</b>
<b>              </b><b>into</b><b> </b>:FSipLabReceteAtisMaliyetiTl<b>  </b><b>;</b>

<b>            </b><b>if</b><b> </b><b>(</b>FSipLabReceteAtisMaliyetiTl<b>=</b>0<b> </b><b>)</b><b> </b><b>then</b>
<b>              </b>FMaliyetGrubu<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>
<b>            </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FSipLabReceteAtisMaliyetiTl<b> </b><b>&lt;</b><b>=</b><b> </b>0<b>.</b>4<b> </b><b>)</b><b> </b><b>then</b>
<b>              </b>FMaliyetGrubu<b> </b><b>=</b><b> </b>'(R1)'<b> </b><b>;</b>
<b>            </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b> </b>FSipLabReceteAtisMaliyetiTl<b> </b><b>&lt;</b><b>=</b><b> </b>0<b>.</b>8<b> </b><b>)</b><b> </b><b>then</b>
<b>              </b>FMaliyetGrubu<b> </b><b>=</b><b> </b>'(R2)'<b> </b><b>;</b>
<b>            </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b> </b>FSipLabReceteAtisMaliyetiTl<b> </b><b>&lt;</b><b>=</b><b> </b>1<b>.</b>2<b> </b><b>)</b><b> </b><b>then</b>
<b>              </b>FMaliyetGrubu<b> </b><b>=</b><b> </b>'(R3)'<b> </b><b>;</b>
<b>            </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b> </b>FSipLabReceteAtisMaliyetiTl<b> </b><b>&lt;</b><b>=</b><b> </b>1<b>.</b>6<b> </b><b>)</b><b> </b><b>then</b>
<b>              </b>FMaliyetGrubu<b> </b><b>=</b><b> </b>'(R4)'<b> </b><b>;</b>
<b>            </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b> </b>FSipLabReceteAtisMaliyetiTl<b> </b><b>&lt;</b><b>=</b><b> </b>2<b> </b><b>)</b><b> </b><b>then</b>
<b>              </b>FMaliyetGrubu<b> </b><b>=</b><b> </b>'(R5)'<b> </b><b>;</b>
<b>            </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b> </b>FSipLabReceteAtisMaliyetiTl<b> </b><b>&gt;</b><b> </b>2<b> </b><b>)</b><b> </b><b>then</b>
<b>              </b>FMaliyetGrubu<b> </b><b>=</b><b> </b>'(R6)'<b> </b><b>;</b>

<b>            </b><b>if</b><b> </b><b>(</b><b> </b><b>Char_Length</b><b>(</b>FMaliyetGrubu<b>)</b><b> </b><b>&gt;</b><b> </b>0<b> </b><b>)</b><b> </b><b>then</b>
<b>              </b>ReceteKoduAdi<b> </b><b>=</b><b> </b>ReceteKoduAdi<b> </b><b>|</b><b>|</b><b> </b>' '<b>|</b><b>|</b><b> </b>FMaliyetGrubu<b> </b><b>;</b>
<b>          </b><b>end</b>
<b>        </b><b>end</b>
<b>      </b><b>end</b>

<b>      </b><font color="# 0 0FF"><i>-- Sipariş No</i></font>
<b>      </b>SiparisNo<b> </b><b>=</b><b> </b><b>Coalesce</b><b>(</b><b>(</b>'('<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisYil<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>4<b>)</b><b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisId<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>20<b>)</b><b>)</b><b>)</b><b>,</b><b> </b>''<b>)</b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>-- Üretim Parti No</i></font>
<b>      </b><b>if</b><b> </b><b>(</b>:FRafDetayId<b> </b><b>is</b><b> </b><b>not</b><b> </b><b>null</b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b><b>if</b><b> </b><b>(</b>:FFasonHamIade<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b><b> </b>UretimPartiNo<b> </b><b>=</b><b> </b>'Fason Ham İade'<b>;</b><b>  </b><b>else</b>
<b>        </b><b>if</b><b> </b><b>(</b>:HareketTipi<b> </b><b>=</b><b> </b>0<b>)</b><b>   </b><b>then</b><b> </b>UretimPartiNo<b> </b><b>=</b><b> </b>'Ham Stok Satış'<b>;</b><b> </b><b>else</b>
<b>        </b><b>if</b><b> </b><b>(</b>:HareketTipi<b> </b><b>=</b><b> </b>1<b>)</b><b>   </b><b>then</b><b> </b>UretimPartiNo<b> </b><b>=</b><b> </b>'İade'<b>;</b>
<b>      </b><b>end</b>
<b>      </b><b>else</b>
<b>      </b><b>begin</b>
<b>        </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b>128<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>133<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>102<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>52<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>120<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/*Mayteks,Bteks, Spectro, Naz Örme, Sadırlar */</i></font>
<b>          </b>UretimPartiNo<b> </b><b>=</b><b> </b>'('<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiYil<b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiId<b>)</b><b>|</b><b>|</b><b> </b>'.'<b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiSiraNo<b>)</b><b>;</b>
<b>        </b><b>else</b>
<b>          </b>UretimPartiNo<b> </b><b>=</b><b> </b>'('<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiYil<b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiId<b>)</b><b>;</b>
<b>      </b><b>end</b>

<b>      </b>SatisFason<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>
<b>      </b><b>if</b><b> </b><b>(</b>FFason<b>=</b>0<b>)</b><b> </b><b>Then</b>
<b>      </b><b>begin</b>
<b>        </b>SatisFason<b> </b><b>=</b><b> </b>'Satış'<b> </b><b>;</b>


<b>        </b><font color="# 0 0FF"><i>/* Satışlarda Proses Gösterilmesi İstenmiyor. */</i></font>
<b>        </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>&lt;</b><b>&gt;</b><b> </b>12<b> </b><b>and</b><b> </b>FEgemenFirmaId<b> </b><b>&lt;</b><b>&gt;</b><b> </b>36<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/* Şevkat,Birlik Örme */</i></font>
<b>        </b><b>begin</b>
<b>          </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>123<b> </b><b>and</b><b> </b>FFirmaId<b> </b><b>=</b><b> </b>'0002'<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/* Assos : Örme Firmasına Satışları için*/</i></font>
<b>            </b>SipProsesveIlaveIslemler<b> </b><b>=</b><b> </b>'ÖN FIKSE VE ŞARDON HİZMET İŞLEMİ YAPILMIŞTIR.'<b> </b><b>;</b>
<b>          </b><b>else</b>
<b>            </b>SipProsesveIlaveIslemler<b> </b><b>=</b><b> </b>''<b>;</b>
<b>        </b><b>end</b>
<b>      </b><b>end</b>
<b>      </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FFason<b>=</b>1<b>)</b><b> </b><b>Then</b>
<b>        </b>SatisFason<b> </b><b>=</b><b> </b>'Fason'<b> </b><b>;</b>

<b>      </b><b>if</b><b>(</b>FFasonHamiade<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b><b>   </b>SatisFason<b> </b><b>=</b><b> </b>'Fason Ham İade'<b>;</b>

<b>      </b><b>if</b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>78<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/* İstanbul Boyahanesi : İrsaliye Grup İd ye Göre Belirleme Yapıyor*/</i></font>
<b>      </b><b>begin</b>
<b>        </b><font color="# 0 0FF"><i>--Kalite Açıklaması</i></font>
<b>        </b><b>if</b><b>      </b><b>(</b>KaliteNo<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b><b>  </b>KaliteId<b> </b><b>=</b><b> </b>'Temiz'<b>  </b><b>;</b>
<b>        </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>KaliteNo<b> </b><b>=</b><b> </b>2<b>)</b><b> </b><b>then</b><b>  </b>KaliteId<b> </b><b>=</b><b> </b>'1A Kalite'<b>  </b><b>;</b>
<b>        </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>KaliteNo<b> </b><b>=</b><b> </b>3<b>)</b><b> </b><b>then</b><b>  </b>KaliteId<b> </b><b>=</b><b> </b>'2A Kalite'<b>  </b><b>;</b>
<b>        </b><b>else</b><b>                         </b>KaliteId<b> </b><b>=</b><b> </b>''<b>  </b><b>;</b>

<b>        </b><b>if</b><b> </b><b>(</b>FStokHareketGrupId<b>  </b><b>=</b><b> </b>11<b>)</b><b> </b><b>then</b><b>       </b>SatisFason<b> </b><b>=</b><b> </b>'Satış'<b> </b><b>;</b>
<b>        </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FStokHareketGrupId<b>  </b><b>=</b><b> </b>12<b>)</b><b> </b><b>then</b><b>  </b>SatisFason<b> </b><b>=</b><b> </b>'Ham İade'<b>  </b><b>;</b>
<b>        </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FStokHareketGrupId<b>  </b><b>=</b><b> </b>13<b>)</b><b> </b><b>then</b><b>  </b>SatisFason<b> </b><b>=</b><b> </b>'Fason Ham İade'<b>  </b><b>;</b>
<b>      </b><b>end</b>

<b>      </b><b>if</b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>130<b> </b><b>and</b><b> </b>FSiparisGrup1Id<b> </b><b>=</b><b> </b>'02'<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/* Merboy GOTS Siparişlerde Ürün Adı Farklı Çıksın İstiyor*/</i></font>
<b>      </b><b>begin</b>
<b>        </b>UrunAdi<b> </b><b>=</b><b>  </b>UrunAdi<b> </b><b>|</b><b>|</b><b> </b>','<b> </b><b>|</b><b>|</b><b> </b>HamAdi3<b> </b><b>|</b><b>|</b><b> </b>' CU 1183113'<b> </b><b>;</b>
<b>      </b><b>end</b>

<b>      </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>16<b> </b><b>and</b><b> </b>SiparisGrup4Adi<b> </b><b>is</b><b> </b><b>not</b><b> </b><b>null</b><b> </b><b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/* Tekboy Sertifikasyon Siparişleri*/</i></font>
<b>      </b><b>begin</b>
<b>        </b><b>if</b><b> </b><b>(</b>FHamStokBirimId<b> </b><b>=</b><b> </b>0<b>  </b><b>or</b><b> </b>FHamStokBirimId<b> </b><b>=</b><b> </b>2<b> </b><b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/* Kg ,Adet Gelirse 2 alana ihtiyacım yok sıfırlıyorum */</i></font>
<b>        </b><b>begin</b>
<b>          </b>TartiBrutMiktar<b> </b><b>=</b><b>  </b>0<b> </b><b>;</b>
<b>          </b>Metre<b>           </b><b>=</b><b>  </b>0<b> </b><b>;</b>
<b>        </b><b>end</b>
<b>        </b><b>else</b>
<b>        </b><b>begin</b>
<b>            </b>TartiBrutMiktar<b> </b><b>=</b><b>  </b>BrutKilo<b> </b><b>;</b>
<b>            </b>Metre<b>           </b><b>=</b><b>  </b>NetKilo<b>  </b><b>;</b>
<b>        </b><b>end</b>
<b>      </b><b>end</b>

<b>      </b><font color="# 0 0FF"><i>/* Dahili Transferlerde Fason-Satış Görünmesi İstenmiyor.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b>FFirmaId<b> </b><b>in</b><b> </b><b>(</b>FFirmaKodumuz<b>,</b><b> </b>FOrmeFirmaKodumuz<b>,</b><b> </b>FIplikFirmaKodumuz<b>)</b><b> </b><b>)</b><b> </b><b>then</b><b> </b>SatisFason<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/* Fatura Edilecek Miktar Tipine Göre Gibe Bildirelecek Miktarın Brüt yada Net Durumuna Karar Veriyoruz.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b>FFaturaMiktarTipi<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b><b> </b>Miktar<b> </b><b>=</b><b> </b>NetMiktar<b> </b><b>;</b>
<b>      </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FFaturaMiktarTipi<b> </b><b>=</b><b> </b>1<b> </b><b>and</b><b> </b>FEgemenFirmaId<b> </b><b>=</b><b> </b>30<b>)</b><b> </b><b>then</b><b> </b>Miktar<b> </b><b>=</b><b> </b>TartiBrutMiktar<b> </b><b>;</b>
<b>      </b><b>else</b><b> </b>Miktar<b> </b><b>=</b><b> </b>BrutMiktar<b> </b><b>;</b>

<b>      </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>&lt;</b><b>&gt;</b><b> </b>30<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/*Kumaş Boya Mikro Aktarımda lazım olduğu için E-İrsaliyede Fiyat bilgisi görünmesin*/</i></font>
<b>      </b><b>begin</b>
<b>        </b>SiparisBirimFiyat<b> </b><b>=</b><b> </b>0<b> </b><b>;</b>
<b>        </b>DovizId<b>           </b><b>=</b><b> </b>''<b>;</b>
<b>      </b><b>end</b>

<b>      </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>137<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/*Afşim Mikro Aktarımda Sabit Kod Gönderiyoruz*/</i></font>
<b>        </b>SatisTransferKodu<b> </b><b>=</b><b> </b>'6001801RNK001'<b> </b><b>;</b>

<b>    </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>138<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>--Artesa</i></font>
<b>      </b><b>begin</b>
<b>       </b>SiparisGrupAdi<b> </b><b>=</b><b> </b>FSiparisGrupDetayAdi<b> </b><b>;</b>
<b>       </b><b>if</b><b> </b><b>(</b>FSipDetayTransferKodu<b> </b><b>is</b><b> </b><b>not</b><b> </b><b>null</b><b>)</b><b> </b><b>then</b>
<b>         </b>UrunAdi<b> </b><b>=</b><b> </b><b>substring</b><b>(</b><b>Cast</b><b> </b><b>(</b>FHamTanitimNotu<b> </b><b>as</b><b> </b><b>Blob</b><b> </b><b>character</b><b> </b><b>set</b><b> </b>UTF8<b>)</b><b> </b><b>from</b><b> </b>1<b> </b><b>FOR</b><b> </b>525<b>)</b><b> </b><b>;</b>

<b>      </b><b>end</b>

<b>      </b><font color="# 0 0FF"><i>/*Xmle Özel Karakterleri Atlayabilmek İçin CDATA İçine Alıyoruz.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b><b> </b>FCDataUygula<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>UrunAdi<b>              </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UrunAdi<b>               </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>UretimPartiNo<b>        </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UretimPartiNo<b>         </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>Lot<b>                  </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>Lot<b>                   </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>MusteriSiparisNo<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>MusteriSiparisNo<b>      </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>ReceteKoduAdi<b>        </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>ReceteKoduAdi<b>         </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>MusteriKaliteAdi<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>MusteriKaliteAdi<b>      </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>SiparisGrupAdi<b>       </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SiparisGrupAdi<b>        </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>SiparisGrup2Adi<b>      </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SiparisGrup2Adi<b>       </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>SiparisGrup3Adi<b>      </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SiparisGrup3Adi<b>       </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>SiparisGrup4Adi<b>      </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SiparisGrup4Adi<b>       </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>DesenKodu<b>            </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>DesenKodu<b>             </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>HamAdi2<b>              </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>HamAdi2<b>               </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>HamAdi3<b>              </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>HamAdi3<b>               </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>HamAdi4<b>              </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>HamAdi4<b>               </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>ReferansSiparisNo<b>    </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>ReferansSiparisNo<b>     </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>MusteriRenkKoduVeAdi<b> </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>MusteriRenkKoduVeAdi<b>  </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>KaliteAdi<b>            </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>KaliteAdi<b>             </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>		</b>PoNo<b>                 </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>PoNo<b>                  </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>		</b>SasNo<b>                </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SasNo<b>                 </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>      </b><b>end</b>

<b>      </b><b>suspend</b><b>;</b>
<b>    </b><b>end</b>
<b>  </b><b>end</b>
<b>  </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>ModulID<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b><b>  </b><font color="# 0 0FF"><i>--&gt; OrmeFisDetayiGetir</i></font>
<b>  </b><b>begin</b>
<b>    </b><b>for</b><b> </b><b>select</b>
<b>              </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>StokHareketId<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>OrmeIrsaliyeID<b>,</b><b> </b><b>cast</b><b>(</b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>HamId<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>80<b>)</b><b>)</b><b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>BrutMiktar<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>Miktar<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>Metre<b>,</b>
<b>              </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>MusteriSiparisNo<b>,</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>MusteriSiparisNo<b>)</b><b>,</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>FatEdilecekHamStokBirimID<b>,</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>BirimID<b>,</b>
<b>              </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisYil<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisId<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>HamIade<b>,</b><b> </b><b>Cast</b><b>(</b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>Notu<b> </b><b>as</b><b> </b><b>blob</b><b> </b><b>sub_type</b><b> </b>1<b> </b><b>segment</b><b> </b><b>size</b><b> </b>80<b>)</b><b>,</b>
<b>              </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>Lot<b>,</b><b> </b><b>Coalesce</b><b>(</b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>OrmePlanlama</u></font><b>.</b>UretimPartiNo<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>UretimPartiNo<b>)</b><b>,</b><b> </b><font color="# 080 0"><u>Ormeraf</u></font><b>.</b>UretimPartiNo<b>)</b><b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>HareketTipi<b>,</b>
<b>              </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>RenkAdi<b>,</b><font color="# 080 0"><u>Renk</u></font><b>.</b>Adi<b>)</b><font color="# 0 0FF"><i>/*MUSTAFA Düzeltti*/</i></font><b>,</b><b> </b><font color="# 080 0"><u>Desen</u></font><b>.</b>DesenId<b> </b><b>|</b><b>|</b><b> </b>' '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>DesenVaryant</u></font><b>.</b>VaryantAdi<b> </b><b>|</b><b>|</b><b> </b>' '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>Desen</u></font><b>.</b>Adi<b>,</b><b> </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>SiparisProses</u></font><b>.</b>Adi<b>,</b>''<b>)</b><b> </b><b>|</b><b>|</b><b> </b>' '<b> </b><b>|</b><b>|</b><b> </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b><font color="# 080 0"><u>IlaveIslemler</u></font><b>,</b>''<b>)</b><b>,</b>
<b>              </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>OrmeSiparisSekliId<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>KapAdedi<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>FaturaMiktarTipi<b>,</b><b> </b><b>Case</b><b> </b><b>when</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>Fason<b> </b><b>=</b><b> </b>1<b> </b><b>then</b><b>  </b><font color="# 080 0"><u>Ham</u></font><b>.</b>FasonTransferKodu<b> </b><b>else</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>SatisTransferKodu<b> </b><b>end</b><b>,</b>
<b>              </b><font color="# 080 0"><u>OrmeIrsaliye</u></font><b>.</b>FirmaId<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>IslemTipiId<b>,</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Faturakesilecek<b>,</b><b> </b><font color="# 080 0"><u>Stokhareket</u></font><b>.</b>Melanjkodu<b>,</b><b> </b><font color="# 080 0"><u>OrmeIrsaliye</u></font><b>.</b>GibEntegrasyonId<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi2<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamTipiId<b>,</b>
<b>              </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>BelgeHamAdi<b>,</b>SG1<b>.</b>Adi<b>,</b><b> </b>SG2<b>.</b>Adi<b>,</b><b> </b>SG3<b>.</b>Adi<b>,</b><b> </b>SG4<b>.</b>Adi<b>,</b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>Pus<b>,</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>Pus<b>)</b><b>,</b>
<b>              </b><b>Coalesce</b><b>(</b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>Feine<b>,</b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>Feine<b>)</b><b>,</b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>KaliteId<b>,</b><font color="# 080 0"><u>Kalite</u></font><b>.</b>KaliteAdi<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>Adet<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>Aciklama<b>,</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>BelgeHamAdi<b>,</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>Metre<b>,</b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>ArtikelNo

<b>    </b><b>from</b><b>      </b><font color="# 080 0"><u>StokHareket</u></font>
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>HamId
<b>    </b><b>Left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>HamStokBirimId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>FatEdilecekHamStokBirimID
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>OrmeSiparisDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>OrmeSiparisDetayId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BoyaSiparisDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>BoyaSiparisDetayId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisKayitId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>BoyaSiparisKayitId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Renk</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Renk</u></font><b>.</b>RenkId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>RenkId
<b>    </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>OrmePlanlama</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>OrmePlanlama</u></font><b>.</b>OrmePlanlamaId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>OrmePlanlamaId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>DesenVaryant</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>DesenVaryant</u></font><b>.</b>DesenVaryantId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>DesenVaryantId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Desen</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Desen</u></font><b>.</b>DesenId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>DesenVaryant</u></font><b>.</b>DesenId
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisProses</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>SiparisProses</u></font><b>.</b>SiparisProsesId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>SiparisProsesId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>OrmeIrsaliye</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>OrmeIrsaliye</u></font><b>.</b>OrmeIrsaliyeId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>OrmeIrsaliyeId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b>.</b>OrmeRafId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>OrmeRafId
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b>SG1<b> </b><b>on</b><b> </b>SG1<b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>SiparisGrupId
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b>SG2<b> </b><b>on</b><b> </b>SG2<b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>SiparisGrup2Id
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b>SG3<b> </b><b>on</b><b> </b>SG3<b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>SiparisGrup3Id
<b>    </b><b>left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>SiparisGrup</u></font><b> </b>SG4<b> </b><b>on</b><b> </b>SG4<b>.</b>SiparisGrupId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>SiparisGrup4Id
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Kalite</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Kalite</u></font><b>.</b>KaliteId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>KaliteId
<b>    </b><b>where</b><b>     </b><font color="# 080 0"><u>StokHareket</u></font><b>.</b>OrmeIrsaliyeID<b> </b><b>=</b><b> </b>:aEIrsaliyeID
<b>    </b><b>into</b><b>     </b>:IrsaliyeDetayID<b>,</b><b> </b>:IrsaliyeId<b>,</b><b> </b>:UrunID<b>,</b><b> </b>:UrunAdi<b>,</b><b> </b>:BrutMiktar<b>,</b><b> </b>:NetMiktar<b>,</b><b> </b>:FNetMetre<b>,</b>
<b>             </b>:MusteriSiparisNo<b>,</b><b> </b>:FHamStokBirimid<b>,</b><b> </b>:Birim<b>,</b>
<b>             </b>:FBoyaSiparisYil<b>,</b><b> </b>:FBoyaSiparisID<b>,</b><b> </b>:FFasonHamIade<b>,</b><b> </b>:Notu<b>,</b>
<b>             </b>:Lot<b>,</b><b> </b>:UretimPartiNo<b>,</b><b> </b>:HareketTipi<b>,</b>
<b>             </b>:ReceteKoduAdi<b>,</b><b> </b>:DesenKodu<b>,</b><b> </b>:SipProsesveIlaveIslemler<b>,</b>
<b>             </b>:FFason<b>,</b><b> </b>:KapAdedi<b>,</b><b> </b>:FFaturaMiktarTipi<b>,</b><b> </b>:TransferKodu<b>,</b>
<b>             </b>:FFirmaId<b>,</b><b> </b>:FIslemtipiid<b>,</b><b> </b>:FUcretliTamir<b>,</b><b> </b>:MelanjKodu<b>,</b><b> </b>:GibEntegrasyonId<b>,</b><b> </b>:HamAdi2<b>,</b>
<b>             </b>:FHamTipiId<b>,</b><b> </b>:FBelgeHamAdi<b>,</b>:SiparisGrupAdi<b>,</b><b> </b>:SiparisGrup2Adi<b>,</b><b> </b>:SiparisGrup3Adi<b>,</b>
<b>              </b>:SiparisGrup4Adi<b>,</b><b> </b>:SipPus<b>,</b><b> </b>:SipFeine<b>,</b><b> </b>:KaliteId<b>,</b><b> </b>:KaliteAdi<b>,</b><b> </b>:Adet<b>,</b><b> </b>:FAciklama<b>,</b><b> </b>:BelgeHamAdi<b>,</b><b> </b>:Metre<b>,</b><b> </b>:ArtikelNo<b> </b><b>do</b>
<b>    </b><b>begin</b>

<b>      </b><b>if</b><b> </b><b>(</b><b> </b>FHamStokBirimId<b> </b><b>=</b><b> </b>0<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>Begin</b>
<b>        </b><font color="# 0 0FF"><i>/* Örmede Brutmiktar ve Netmiktar Kilo Olarak Atandığı için bu kısmı devre dışı bıraktım.*/</i></font>

<b>        </b><font color="# 0 0FF"><i>--BrutMiktar = BrutKilo ;</i></font>
<b>        </b><font color="# 0 0FF"><i>--NetMiktar  = NetKilo  ;</i></font>
<b>      </b><b>end</b>
<b>      </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b> </b>FHamStokBirimId<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b> </b><b>;</b><b>      </b><font color="# 0 0FF"><i>/* Stokharekette Brüt Metre olmadığı için 0 a çekiyorum.*/</i></font>
<b>        </b>NetMiktar<b>  </b><b>=</b><b> </b>FNetMetre<b> </b><b>;</b>
<b>      </b><b>End</b>
<b>    </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b><b> </b>FHamStokBirimId<b> </b><b>=</b><b> </b>2<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b> </b><b>;</b><b>      </b><font color="# 0 0FF"><i>/* Stokharekette Brüt Metre olmadığı için 0 a çekiyorum.*/</i></font>
<b>        </b>NetMiktar<b>  </b><b>=</b><b> </b>Adet<b> </b><b>;</b>
<b>      </b><b>End</b>
<b>      </b><b>Else</b>
<b>      </b><b>Begin</b>
<b>        </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b> </b><b>;</b>
<b>        </b>NetMiktar<b>  </b><b>=</b><b> </b>0<b> </b><b>;</b>
<b>      </b><b>End</b>
<b>      </b><font color="# 0 0FF"><i>-- Sipariş No</i></font>
<b>      </b>SiparisNo<b> </b><b>=</b><b> </b><b>Coalesce</b><b>(</b><b>(</b>'('<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisYil<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>4<b>)</b><b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisId<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>20<b>)</b><b>)</b><b>)</b><b>,</b><b> </b>''<b>)</b><b>;</b>

<b>      </b>SatisFason<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>
<b>      </b><b>If</b><b> </b><b>(</b>FFason<b>=</b>0<b>)</b><b> </b><b>Then</b>
<b>      </b><b>Begin</b>
<b>        </b>SatisFason<b> </b><b>=</b><b> </b>'Satış'<b> </b><b>;</b>
<b>        </b>SipProsesveIlaveIslemler<b> </b><b>=</b><b> </b>''<b> </b><b>;</b><b>   </b><font color="# 0 0FF"><i>/* Satışlarda Proses Gösterilmesi İstenmiyor */</i></font>
<b>        </b>BrutMiktar<b> </b><b>=</b><b> </b>0<b> </b><b>;</b><b>                  </b><font color="# 0 0FF"><i>/* Satışlarda Brüt Kilo Gösterilmesi İstenmiyor */</i></font>
<b>      </b><b>End</b>
<b>      </b><b>Else</b><b> </b><b>If</b><b> </b><b>(</b>FFason<b>=</b>1<b>)</b><b> </b><b>Then</b>
<b>	    </b>SatisFason<b> </b><b>=</b><b> </b>'Fason + Satış'<b>;</b>

<b>      </b><b>Else</b><b> </b><b>If</b><b> </b><b>(</b>FFason<b>=</b>2<b>)</b><b> </b><b>Then</b>
<b>        </b>SatisFason<b> </b><b>=</b><b> </b>'Fason'<b> </b><b>;</b>


<b>      </b><b>If</b><b> </b><b>(</b>HareketTipi<b>=</b>2<b>)</b><b> </b><b>Then</b>
<b>      </b><b>Begin</b>
<b>        </b><b>if</b><b> </b><b>(</b>FFasonHamIade<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b>
<b>          </b>UretimPartiNo<b> </b><b>=</b><b> </b>'Fason Ham İade'<b>;</b>
<b>        </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FIslemTipiId<b> </b><b>=</b><b> </b>3<b> </b><b>)</b><b> </b><b>then</b>
<b>        </b><b>begin</b>
<b>          </b><b>if</b><b> </b><b>(</b>FUcretlitamir<b> </b><b>=</b><b> </b>1<b>)</b><b> </b><b>then</b>
<b>            </b>SipProsesveIlaveIslemler<b> </b><b>=</b><b> </b>SipProsesveIlaveIslemler<b> </b><b>|</b><b>|</b><b> </b>' (Ücretli tamir)'<b> </b><b>;</b>
<b>          </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FUcretlitamir<b> </b><b>=</b><b> </b>0<b>)</b><b> </b><b>then</b>
<b>            </b>SipProsesveIlaveIslemler<b> </b><b>=</b><b> </b>SipProsesveIlaveIslemler<b> </b><b>|</b><b>|</b><b> </b>' (Ücretsiz tamir)'<b> </b><b>;</b>
<b>        </b><b>end</b>
<b>      </b><b>End</b>
<b>      </b><b>Else</b>
<b>        </b>SipProsesveIlaveIslemler<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/* Satış Dışındaki Hareketlerde Fason-satış Görünmesi Istenmiyor.*/</i></font>
<b>      </b><b>If</b><b> </b><b>(</b>FFirmaId<b> </b><b>in</b><b> </b><b>(</b>FFirmaKodumuz<b>,</b><b> </b>FOrmeFirmaKodumuz<b>,</b><b> </b>FIplikFirmaKodumuz<b>)</b><b> </b><b>or</b><b> </b><b>(</b>HareketTipi<b>&lt;</b><b>&gt;</b>2<b>)</b><b> </b><b>)</b><b> </b><b>then</b>
<b>        </b>SatisFason<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/* Fatura Edilecek Miktar Tipine Göre Gibe Bildirelecek Miktarın Brüt Yada Net Durumuna Karar Veriyoruz.*/</i></font>
<b>      </b><b>If</b><b> </b><b>(</b>FFaturaMiktarTipi<b> </b><b>=</b><b> </b>0<b> </b><b>)</b><b> </b><b>Then</b>
<b>        </b>Miktar<b> </b><b>=</b><b> </b>NetMiktar<b> </b><b>;</b>
<b>      </b><b>Else</b>
<b>        </b>Miktar<b> </b><b>=</b><b> </b>BrutMiktar<b> </b><b>;</b>

<b>      </b><b>if</b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>121<b>  </b><b>and</b><b> </b>HareketTipi<b>&lt;</b><b>&gt;</b>6<b> </b><b>and</b><b> </b>FHamTipiId<b>=</b>1<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/* Ekose Satışlarda HamAdı2'yi kullanıyor.*/</i></font>
<b>        </b>UrunAdi<b> </b><b>=</b><b> </b>HamAdi2<b> </b><b>;</b>

<b>      </b><b>if</b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>56<b> </b><b>)</b><b> </b><b>then</b><font color="# 0 0FF"><i>/*NS Örme*/</i></font>
<b>      </b><b>begin</b>
<b>        </b><b>if</b><b>  </b><b>(</b>FHamTipiId<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>          </b>UrunAdi<b> </b><b>=</b><b> </b>FBelgeHamAdi<b>  </b><b>;</b>
<b>        </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>FHamTipiId<b> </b><b>=</b><b> </b>0<b>  </b><b>and</b><b> </b>HareketTipi<b>=</b>2<b>)</b><b> </b><b>then</b><b>  </b><font color="# 0 0FF"><i>/*İplik satış*/</i></font>
<b>          </b>UrunAdi<b> </b><b>=</b><b> </b>HamAdi2<b> </b><b>;</b>
<b>      </b><b>end</b>

<b>    </b><b>if</b><b>(</b>FEgemenFirmaId<b> </b><b>=</b><b> </b>138<b>)</b><b> </b><b>then</b><b>   </b><font color="# 0 0FF"><i>/* Artesa Açıklamayı Sertifikaya yazacak*/</i></font>
<b>        </b>Notu<b> </b><b>=</b><b> </b>FAciklama<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/* Xmle Özel Karakterleri Atlayabilmek Için CDATA Içine Alıyorum.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b><b> </b>FCDataUygula<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>UrunAdi<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UrunAdi<b>          </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>UretimPartiNo<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UretimPartiNo<b>    </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>Lot<b>               </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>Lot<b>              </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>MusteriSiparisNo<b>  </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>MusteriSiparisNo<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>ReceteKoduAdi<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>ReceteKoduAdi<b>    </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>SiparisGrupAdi<b>    </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SiparisGrupAdi<b>   </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>SiparisGrup2Adi<b>   </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SiparisGrup2Adi<b>  </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>SiparisGrup3Adi<b>   </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SiparisGrup3Adi<b>  </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>SiparisGrup4Adi<b>   </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>SiparisGrup4Adi<b>  </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>DesenKodu<b>         </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>DesenKodu<b>        </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>HamAdi2<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>HamAdi2<b>          </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>HamAdi3<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>HamAdi3<b>          </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>HamAdi4<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>HamAdi4<b>          </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>KaliteAdi<b>         </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>KaliteAdi<b>        </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>      </b><b>end</b>
<b>      </b><b>suspend</b><b>;</b>
<b>    </b><b>end</b>
<b>  </b><b>end</b><b> </b><b>else</b>
<b>  </b><b>if</b><b> </b><b>(</b>ModulID<b> </b><b>=</b><b> </b>2<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>--&gt; IplikIrsaliye</i></font>
<b>  </b><b>begin</b>
<b>    </b>UretimPartiNo<b> </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b><font color="# 0 0FF"><i>/*İplik irsaliyede fason ve boyahanedeki renk desen proses gibi bilgiler olmadığı için gerekli bilgileri çekmiyoruz.*/</i></font>
<b>    </b><b>for</b><b> </b><b>select</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>IplikIrsaliyeDetayID<b>,</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>IplikIrsaliyeID<b>,</b><b> </b><b>cast</b><b>(</b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>HamID<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>80<b>)</b><b>)</b><b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi<b>,</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>Miktar<b>,</b>
<b>        </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>NetMiktar<b>,</b><b> </b><b>coalesce</b><b>(</b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>MusteriSiparisNo<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>MusteriSiparisNo<b>)</b><b>,</b>
<b>        </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>BirimID<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisYil<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisId<b>,</b><b> </b><b>cast</b><b>(</b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>Notu<b> </b><b>as</b><b> </b><b>blob</b><b> </b><b>sub_type</b><b> </b>1<b> </b><b>segment</b><b> </b><b>size</b><b> </b>80<b>)</b><b>,</b>
<b>        </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>Lot<b>,</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>HareketTipi<b>,</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>Kapadedi<b>,</b><b> </b><b>Case</b><b> </b><b>when</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>Fason<b> </b><b>=</b><b> </b>1<b> </b><b>then</b><b>  </b><font color="# 080 0"><u>Ham</u></font><b>.</b>FasonTransferKodu<b> </b><b>else</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>SatisTransferKodu<b> </b><b>end</b><b>,</b>
<b>        </b><font color="# 080 0"><u>IplikIrsaliye</u></font><b>.</b>FirmaId<b>,</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>MelanjKodu<b>,</b><b> </b><font color="# 080 0"><u>IplikIrsaliye</u></font><b>.</b>GibEntegrasyonId<b>,</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>BelgeHamAdi
<b>    </b><b>from</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font>
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>HamId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>HamStokBirimId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>DefaultHamStokBirimId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>IplikTalepDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>IplikTalepDetay</u></font><b>.</b>IplikTalepDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>IplikTalepDetayId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>OrmeSiparisDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>IplikTalepDetay</u></font><b>.</b>OrmeSiparisDetayId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BoyaSiparisDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>IplikTalepDetay</u></font><b>.</b>BoyaSiparisDetayId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisKayitId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BoyaSiparisKayitId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>IplikIrsaliye</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>IplikIrsaliye</u></font><b>.</b>IplikIrsaliyeId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>IplikIrsaliyeId
<b>    </b><b>where</b><b>     </b><font color="# 080 0"><u>IplikIrsaliyeDetay</u></font><b>.</b>IplikIrsaliyeID<b> </b><b>=</b><b> </b>:AEIrsaliyeId
<b>    </b><b>into</b><b>  </b>:IrsaliyeDetayID<b>,</b><b> </b>:IrsaliyeId<b>,</b><b> </b>:UrunID<b>,</b><b> </b>:UrunAdi<b>,</b><b> </b>:BrutMiktar<b>,</b>
<b>          </b>:NetMiktar<b>,</b><b> </b>:MusteriSiparisNo<b>,</b>
<b>          </b>:Birim<b>,</b><b> </b>:FBoyaSiparisYil<b>,</b><b> </b>:FBoyaSiparisID<b>,</b><b> </b>:Notu<b>,</b>
<b>          </b>:Lot<b>,</b><b> </b>:HareketTipi<b>,</b><b> </b>:KapAdedi<b>,</b><b> </b>:TransferKodu<b>,</b><b> </b>:FFirmaId<b>,</b><b> </b>:MelanjKodu<b>,</b><b> </b>:GibEntegrasyonId<b>,</b><b> </b>:BelgeHamAdi<b>  </b><b>do</b>

<b>    </b><b>begin</b>

<b>      </b><font color="# 0 0FF"><i>-- Sipariş No</i></font>
<b>      </b>SiparisNo<b> </b><b>=</b><b> </b><b>Coalesce</b><b>(</b><b>(</b>'('<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisYil<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>4<b>)</b><b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisId<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>20<b>)</b><b>)</b><b>)</b><b>,</b><b> </b>''<b>)</b><b>;</b>
<b>      </b><font color="# 0 0FF"><i>/* Iplikirsaliye De Fason Kavramı Olmadığı Için Net Miktarı Yazıyoruz.*/</i></font>
<b>      </b>Miktar<b> </b><b>=</b><b> </b>NetMiktar<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/* Xslt De Melanj Kodu Için Ayrı Bir Alan Açmadık. Gülle Iplikte Melanj Kodu Renk Kısmında Görünsün Isteniyor.*/</i></font>
<b>      </b>ReceteKoduAdi<b> </b><b>=</b><b> </b>MelanjKodu<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/* Xmle Özel Karakterleri Atlayabilmek Için Cdata Içine Alıyorum.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b><b> </b>FCDataUygula<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>UrunAdi<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UrunAdi<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>UretimPartiNo<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UretimPartiNo<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>Lot<b>               </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>Lot<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>MusteriSiparisNo<b>  </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>MusteriSiparisNo<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>      </b><b>end</b>


<b>      </b><b>suspend</b><b>;</b>
<b>    </b><b>end</b>
<b>  </b><b>end</b><b> </b><b>else</b>
<b>  </b><b>if</b><b> </b><b>(</b>ModulID<b> </b><b>=</b><b> </b>3<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>--&gt; Irsaliye</i></font>
<b>  </b><b>begin</b>
<b>    </b>BrutMiktar<b> </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b>MusteriSiparisNo<b>  </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b>UretimPartiNo<b>     </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b><font color="# 0 0FF"><i>/*Stok Irsaliyede Üretimle Ilgili Bir Durum Yok. O Yüzden Renk Desen Proses Gibi Bilgileri Çekmiyoruz.*/</i></font>
<b>    </b><b>for</b><b> </b><b>select</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>stokdetayid<b>,</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>irsaliyeid<b>,</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>UrunID<b>,</b><b> </b><font color="# 080 0"><u>Urun</u></font><b>.</b>adi<b>,</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>Miktar<b>,</b>
<b>          </b><font color="# 080 0"><u>UrunBirim</u></font><b>.</b>BirimID<b>,</b><b> </b>'('<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>VerilenSiparis</u></font><b>.</b>VerilenSiparisYil<b> </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>VerilenSiparis</u></font><b>.</b>VerilenSiparisId<b>,</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>Notu<b>,</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>Lot<b>,</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>HareketTipi<b>,</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>KapAdedi<b>,</b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>UrunID<b>,</b>
<b>          </b><font color="# 080 0"><u>Irsaliye</u></font><b>.</b>FirmaId<b>,</b><b> </b><font color="# 080 0"><u>Irsaliye</u></font><b>.</b>GibEntegrasyonId
<b>    </b><b>from</b><b>  </b><font color="# 080 0"><u>StokDetay</u></font>
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Urun</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Urun</u></font><b>.</b>UrunId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>UrunId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>UrunBirim</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>UrunBirim</u></font><b>.</b>UrunBirimId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>UrunBirimId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>VerilenSiparis</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>VerilenSiparis</u></font><b>.</b>VerilenSiparisKayitId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>VerilenSiparisKayitId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Irsaliye</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Irsaliye</u></font><b>.</b>IrsaliyeId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>IrsaliyeId
<b>    </b><b>where</b><b> </b><font color="# 080 0"><u>StokDetay</u></font><b>.</b>irsaliyeid<b> </b><b>=</b><b> </b>:aEIrsaliyeID
<b>    </b><b>into</b><b> </b>:IrsaliyeDetayID<b>,</b><b> </b>:IrsaliyeId<b>,</b><b> </b>:UrunID<b>,</b><b> </b>:UrunAdi<b>,</b><b> </b>:Miktar<b>,</b>
<b>         </b>:Birim<b>,</b><b> </b>:SiparisNo<b>,</b><b> </b>:Notu<b>,</b><b> </b>:Lot<b>,</b><b> </b>:HareketTipi<b>,</b><b> </b>:KapAdedi<b>,</b><b> </b>:TransferKodu<b>,</b><b> </b>:FFirmaId<b>,</b><b> </b>:GibEntegrasyonId<b> </b><b>do</b>

<b>    </b><b>Begin</b>
<b>      </b><font color="# 0 0FF"><i>/*Irsaliye Miktar Görünmesi Için Netmiktara Değer Atiyorum.*/</i></font>
<b>      </b>NetMiktar<b> </b><b>=</b><b> </b>Miktar<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/*Xmle Özel Karakterleri Atlayabilmek Için Cdata Içine Alıyorum.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b><b> </b>FCDataUygula<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>UrunAdi<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UrunAdi<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>UretimPartiNo<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UretimPartiNo<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>Lot<b>               </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>Lot<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>MusteriSiparisNo<b>  </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>MusteriSiparisNo<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>      </b><b>end</b>

<b>      </b><b>suspend</b><b>;</b>
<b>    </b><b>End</b>
<b>  </b><b>end</b>
<b>  </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>ModulID<b> </b><b>=</b><b> </b>4<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>--&gt; UniteIrsaliye</i></font>
<b>  </b><b>begin</b>
<b>    </b>UretimPartiNo<b> </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b>HareketTipi<b>   </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>     </b><font color="# 0 0FF"><i>/* Uniteirsaliyedetay Brüt Metre Olmadığı Için Varolan Metreyi Kullandım Brüt Olarak.</i></font>
<font color="# 0 0FF"><i>       Dahili Transfer Olduğu Için Proses Renk Desen Gerekli Değil Normalde O Yüzden Proses Renk Desen Ile</i></font>
<font color="# 0 0FF"><i>       Ilgili Bir Işlem Yapmadım. */</i></font>

<b>    </b><b>for</b><b> </b><b>select</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>UniteIrsaliyeDetayID<b>,</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>UniteIrsaliyeID<b>,</b><b>  </b><b>cast</b><b>(</b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>HamID<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>80<b>)</b><b>)</b><b> </b><b>,</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>HamAdiToplami<b>,</b>
<b>            </b><b>IIF</b><b>(</b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>MiktarBirim<b>=</b>0<b>,</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>Kilo<b>,</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>Metre<b>)</b><b>,</b><b> </b><b>IIF</b><b>(</b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>MiktarBirim<b>=</b>0<b>,</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>NetKilo<b>,</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>Metre<b>)</b><b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>MusteriSiparisNo<b>,</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>BirimID<b>,</b>
<b>            </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisYil<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisId<b>,</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>Aciklama<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>Lot<b>,</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>KapAdedi<b>,</b><b> </b><b>Case</b><b> </b><b>when</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>Fason<b> </b><b>=</b><b> </b>1<b> </b><b>then</b><b>  </b><font color="# 080 0"><u>Ham</u></font><b>.</b>FasonTransferKodu<b> </b><b>else</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>SatisTransferKodu<b> </b><b>end</b><b>,</b>
<b>            </b>AliciUnite<b>.</b>FaturaFirmaId<b>,</b><b> </b><font color="# 080 0"><u>UniteIrsaliye</u></font><b>.</b>GibEntegrasyonId<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>KaliteId<b>,</b><font color="# 080 0"><u>Kalite</u></font><b>.</b>KaliteAdi<b>,</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>PartiYil<b>,</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>PartiId<b>,</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>PartiSiraNo
<b>    </b><b>from</b><b>      </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font>
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>      </b><b>on</b><b>  </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>HamStokBirimId<b>         </b><b>=</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>MiktarBirim
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>             </b><b>on</b><b>  </b><font color="# 080 0"><u>Parti</u></font><b>.</b>PartiKayitID<b>                  </b><b>=</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>PartiKayitID
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>       </b><b>on</b><b>  </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisKayitID<b>      </b><b>=</b><b> </b><font color="# 080 0"><u>Parti</u></font><b>.</b>BoyaSiparisKayitID
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>         </b><b>on</b><b>  </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>PartiSinifID<b>              </b><b>=</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>PartiSinifID
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>  </b><b>on</b><b>  </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BoyaSiparisDetayID<b> </b><b>=</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>BoyaSiparisDetayID
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>UniteIrsaliye</u></font><b>     </b><b>on</b><b>  </b><font color="# 080 0"><u>UniteIrsaliye</u></font><b>.</b>UniteIrsaliyeId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>UniteIrsaliyeId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>               </b><b>on</b><b>  </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>HamId
<b>    </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Unite</u></font><b> </b>AliciUnite<b> </b><b>ON</b><b> </b>AliciUnite<b>.</b>UniteId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>UniteIrsaliye</u></font><b>.</b>AliciUniteId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Kalite</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Kalite</u></font><b>.</b>KaliteId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>KaliteId
<b>    </b><b>where</b><b>     </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>UniteIrsaliyeID<b>  </b><b>=</b><b> </b>:aEIrsaliyeID
<b>    </b><b>order</b><b> </b><b>by</b><b>  </b><font color="# 080 0"><u>UniteIrsaliyeDetay</u></font><b>.</b>UniteIrsaliyeDetayID
<b>    </b><b>into</b><b> </b>:IrsaliyeDetayID<b>,</b><b> </b>:IrsaliyeId<b>,</b><b> </b>:UrunID<b>,</b><b> </b>:UrunAdi<b>,</b>
<b>          </b>:BrutMiktar<b>,</b><b> </b>:NetMiktar<b>,</b><b> </b>:MusteriSiparisNo<b>,</b><b> </b>:Birim<b>,</b>
<b>          </b>:FBoyaSiparisYil<b>,</b><b> </b>:FBoyaSiparisID<b>,</b><b> </b>:Notu<b>,</b><b> </b>:Lot<b>,</b><b> </b>:KapAdedi<b>,</b>
<b>          </b>:TransferKodu<b>,</b><b> </b>:FFirmaId<b>,</b><b> </b>:GibEntegrasyonId<b>,</b><b> </b>:KaliteId<b>,</b><b> </b>:KaliteAdi<b>,</b><b> </b>:FPartiYil<b>,</b><b> </b>:FPartiID<b>,</b><b> </b>:FPartiSiraNo<b>  </b><b>do</b>
<b>    </b><b>begin</b>
<b>      </b>SiparisNo<b> </b><b>=</b><b> </b><b>Coalesce</b><b>(</b><b>(</b>'('<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisYil<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>4<b>)</b><b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisId<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>20<b>)</b><b>)</b><b>)</b><b>,</b><b> </b>''<b>)</b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/*Dahili Transferlerde Fason-satiş Görünmesi Istenmiyor.*/</i></font>
<b>      </b><b>If</b><b> </b><b>(</b>FFirmaId<b> </b><b>in</b><b> </b><b>(</b>FFirmaKodumuz<b>,</b><b> </b>FOrmeFirmaKodumuz<b>,</b><b> </b>FIplikFirmaKodumuz<b>)</b><b> </b><b>)</b><b> </b><b>then</b>
<b>        </b>SatisFason<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/*Iç Transfer Olduğu Için Miktarı Yazıyoruz.*/</i></font>
<b>      </b>Miktar<b> </b><b>=</b><b> </b>BrutMiktar<b> </b><b>;</b>


<b>      </b><font color="# 0 0FF"><i>/*Xmle Özel Karakterleri Atlayabilmek Için Cdata Içine Alıyorum.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b><b> </b>FCDataUygula<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>UrunAdi<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UrunAdi<b>          </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>UretimPartiNo<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UretimPartiNo<b>    </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>Lot<b>               </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>Lot<b>              </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>MusteriSiparisNo<b>  </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>MusteriSiparisNo<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>KaliteAdi<b>         </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>KaliteAdi<b>        </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>      </b><b>end</b>

<b>      </b><b>suspend</b><b>;</b>
<b>    </b><b>end</b>
<b>  </b><b>end</b>
<b>  </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>ModulID<b> </b><b>=</b><b> </b>5<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>--&gt; Orme Raf Transfer</i></font>
<b>  </b><b>begin</b>
<b>    </b>UretimPartiNo<b> </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b>HareketTipi<b>   </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b><b>for</b><b> </b><b>select</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>OrmeRafTransferFisiDetayId<b>,</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>ormeraftransferfisiid<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>hamid<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi<b>,</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>Kilo<b>,</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>BrutKilo<b>,</b>
<b>             </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>birimid<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisYil<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisId<b>,</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b>.</b>Lot<b>,</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b>.</b>UretimPartiNo<b>,</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>KapAdedi<b>,</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>YeniOrmerafId
<b>      </b><b>from</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font>
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b>.</b>OrmeRafID<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>OrmeRafId
<b>      </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Kullanici</u></font><b> </b>IK<b> </b><b>on</b><b> </b>IK<b>.</b>KullaniciId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>InsertKullaniciId
<b>      </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Kullanici</u></font><b> </b>SK<b> </b><b>on</b><b> </b>SK<b>.</b>KullaniciId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>KullaniciId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b>.</b>HamId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>HamStokBirimId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>DefaultHamStokBirimId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Renk</u></font><b> </b>RafRenk<b> </b><b>on</b><b> </b>RafRenk<b>.</b>RenkId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b>.</b>RenkId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisKayitId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b>.</b>BoyaSiparisKayitId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Firma</u></font><b> </b>SiparisFirma<b> </b><b>on</b><b> </b>SiparisFirma<b>.</b>FirmaId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>FirmaId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>OrmeSiparisDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeRaf</u></font><b>.</b>OrmeSiparisDetayId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Renk</u></font><b> </b><font color="# 080 0"><u>HamRenk</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>HamRenk</u></font><b>.</b>RenkId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeSiparisDetay</u></font><b>.</b>RenkId
<b>      </b><b>Left</b><b> </b><b>Join</b><b> </b><font color="# 080 0"><u>Kullanici</u></font><b> </b>OK<b> </b><b>on</b><b> </b>OK<b>.</b>KullaniciId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>OnaylayanKullaniciId
<b>      </b><b>where</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>OrmeRafTransferFisiId<b> </b><b>=</b><b> </b>:aEIrsaliyeID
<b>      </b><b>order</b><b> </b><b>by</b><b> </b><font color="# 080 0"><u>OrmeRafTransferFisiDetay</u></font><b>.</b>OrmeRafTransferFisiDetayId
<b>    </b><b>into</b><b> </b>:IrsaliyeDetayID<b>,</b><b> </b>:IrsaliyeId<b>,</b><b> </b>:UrunID<b>,</b><b> </b>:UrunAdi<b>,</b><b> </b>:BrutMiktar<b>,</b><b> </b>:NetMiktar<b>,</b><b> </b>:Birim<b>,</b>
<b>         </b>:FBoyaSiparisYil<b>,</b><b> </b>:FBoyaSiparisID<b>,</b><b> </b>:Lot<b>,</b><b> </b>:UretimPartiNo<b>,</b><b> </b>:KapAdedi<b>,</b><b> </b>:FFirmaId
<b>    </b><b>do</b>
<b>    </b><b>begin</b>
<b>      </b>SiparisNo<b> </b><b>=</b><b> </b><b>Coalesce</b><b>(</b><b>(</b>'('<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisYil<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>4<b>)</b><b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisId<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>20<b>)</b><b>)</b><b>)</b><b>,</b><b> </b>''<b>)</b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/* Dahili Transferlerde Fason-satış Görünmesi Istenmiyor.*/</i></font>
<b>      </b><b>If</b><b> </b><b>(</b>FFirmaId<b> </b><b>in</b><b> </b><b>(</b>FFirmaKodumuz<b>,</b><b> </b>FOrmeFirmaKodumuz<b>,</b><b> </b>FIplikFirmaKodumuz<b>)</b><b> </b><b>)</b><b> </b><b>then</b>
<b>        </b>SatisFason<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/*Iç Transfer Olduğu Için Miktarı Yazıyoruz.*/</i></font>
<b>      </b>Miktar<b> </b><b>=</b><b> </b>BrutMiktar<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/*Xmle Özel Karakterleri Atlayabilmek Için Cdata Içine Alıyorum.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b><b> </b>FCDataUygula<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>UrunAdi<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UrunAdi<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>Lot<b>               </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>Lot<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>UretimPartiNo<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UretimPartiNo<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>      </b><b>end</b>

<b>      </b><b>suspend</b><b>;</b>
<b>    </b><b>end</b>
<b>  </b><b>end</b>
<b>  </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>ModulID<b> </b><b>=</b><b> </b>6<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>--&gt; Mamul Depo Transfer</i></font>
<b>  </b><b>begin</b>
<b>    </b>UretimPartiNo<b> </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b>HareketTipi<b>   </b><b>=</b><b> </b><b>Null</b><b> </b><b>;</b>
<b>    </b><b>for</b><b> </b><b>select</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>MamulDepoTransferFisiId<b>,</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>MamulDepoTransferFisiId<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>hamid<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi<b>,</b>
<b>               </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>birimid<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisYil<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisId<b>,</b>
<b>               </b><font color="# 080 0"><u>Firma</u></font><b>.</b>FirmaId<b>,</b><b> </b><b>sum</b><b>(</b><font color="# 080 0"><u>PartiStoktarti</u></font><b>.</b>KapAdedi<b>)</b><b>,</b><b> </b><b>sum</b><b>(</b><font color="# 080 0"><u>PartiStokTarti</u></font><b>.</b>Kilo<b>)</b><b>,</b><b> </b><b>sum</b><b>(</b><font color="# 080 0"><u>PartiStokTarti</u></font><b>.</b>BrutKilo<b>)</b><b>,</b><b>sum</b><b>(</b><font color="# 080 0"><u>PartiStokTarti</u></font><b>.</b>Metre<b>)</b><b>,</b><b> </b><b>sum</b><b>(</b><font color="# 080 0"><u>PartiStokTarti</u></font><b>.</b>Adet<b>)</b>

<b>      </b><b>from</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font>
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisi</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisi</u></font><b>.</b>MamulDepoTransferFisiId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>MamulDepoTransferFisiId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Depo</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Depo</u></font><b>.</b>DepoId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisi</u></font><b>.</b>TransferDepoId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Raf</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Raf</u></font><b>.</b>RafId<b> </b><b>=</b><b>  </b><font color="# 080 0"><u>Depo</u></font><b>.</b>DefaultRafId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Firma</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Firma</u></font><b>.</b>FirmaId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Raf</u></font><b>.</b>FirmaId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>PartiStokTarti</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>PartiStokTarti</u></font><b>.</b>PartiStokTartiId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>PartiStokTartiId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>PartiSinifId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>PartiSinifId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>HamId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>HamStokBirimId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>DefaultHamStokBirimId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BoyaSiparisDetayId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>PartiStok</u></font><b>.</b>BoyaSiparisDetayId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisKayitId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparisDetay</u></font><b>.</b>BoyaSiparisKayitId
<b>      </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Firma</u></font><b> </b>SiparisFirma<b> </b><b>on</b><b> </b>SiparisFirma<b>.</b>FirmaId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>FirmaId
<b>      </b><b>where</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>MamulDepoTransferFisiId<b> </b><b>=</b><b> </b>:aEIrsaliyeID
<b>      </b><b>Group</b><b> </b><b>by</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>MamulDepoTransferFisiId<b>,</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>MamulDepoTransferFisiId<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>hamid<b>,</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>Adi<b>,</b>
<b>               </b><font color="# 080 0"><u>HamStokBirim</u></font><b>.</b>birimid<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisYil<b>,</b><b> </b><font color="# 080 0"><u>BoyaSiparis</u></font><b>.</b>BoyaSiparisId<b>,</b>
<b>               </b><font color="# 080 0"><u>Firma</u></font><b>.</b>FirmaId
<b>      </b><b>order</b><b> </b><b>by</b><b> </b><font color="# 080 0"><u>MamulDepoTransferFisiDetay</u></font><b>.</b>MamulDepoTransferFisiId
<b>    </b><b>into</b><b> </b>:IrsaliyeDetayID<b>,</b><b> </b>:IrsaliyeId<b>,</b><b> </b>:UrunID<b>,</b><b> </b>:UrunAdi<b>,</b>
<b>         </b>:Birim<b>,</b><b> </b>:FBoyaSiparisYil<b>,</b><b> </b>:FBoyaSiparisID<b>,</b>
<b>         </b>:FFirmaId<b>,</b><b> </b>:KapAdedi<b>,</b><b> </b>:BrutMiktar<b>,</b><b> </b>:NetMiktar<b>,</b><b> </b>:Metre<b>,</b><b> </b>:Adet
<b>    </b><b>do</b>
<b>    </b><b>begin</b>

<b>      </b>SiparisNo<b> </b><b>=</b><b> </b><b>Coalesce</b><b>(</b><b>(</b>'('<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisYil<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>4<b>)</b><b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><b>cast</b><b>(</b>:FBoyaSiparisId<b> </b><b>as</b><b> </b><b>varchar</b><b>(</b>20<b>)</b><b>)</b><b>)</b><b>,</b><b> </b>''<b>)</b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/*Dahili Transferlerde Fason-satış Görünmesi Istenmiyor.*/</i></font>
<b>      </b><b>If</b><b> </b><b>(</b>FFirmaId<b> </b><b>in</b><b> </b><b>(</b>FFirmaKodumuz<b>,</b><b> </b>FOrmeFirmaKodumuz<b>,</b><b> </b>FIplikFirmaKodumuz<b>)</b><b> </b><b>)</b><b> </b><b>then</b>
<b>        </b>SatisFason<b> </b><b>=</b><b> </b>''<b> </b><b>;</b>

<b>      </b><font color="# 0 0FF"><i>/*Iç Transfer Olduğu Için Miktarı Yazıyoruz.*/</i></font>
<b>      </b>Miktar<b> </b><b>=</b><b> </b>BrutMiktar<b> </b><b>;</b>
<b>		</b>
<b>	  </b><b>if</b><b> </b><b>(</b>FEgemenFirmaId<b> </b><b>=</b>128<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>133<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>102<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>52<b> </b><b>or</b><b> </b>FEgemenFirmaId<b> </b><b>=</b>120<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>/*Mayteks,Bteks, Spectro, Naz Örme, Sadırlar */</i></font>
<b>        </b>UretimPartiNo<b> </b><b>=</b><b> </b>'('<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiYil<b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiId<b>)</b><b>|</b><b>|</b><b> </b>'.'<b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiSiraNo<b>)</b><b>;</b>
<b>      </b><b>else</b>
<b>        </b>UretimPartiNo<b> </b><b>=</b><b> </b>'('<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiYil<b>)</b><b>  </b><b>|</b><b>|</b><b> </b>') '<b> </b><b>|</b><b>|</b><b> </b><font color="# 080 0"><u>EgemenIntegerToStr</u></font><b>(</b>:FPartiId<b>)</b><b>;</b>
<b>     </b>
<b>	  </b><font color="# 0 0FF"><i>/*Xmle Özel Karakterleri Atlayabilmek Için Cdata Içine Alıyorum.*/</i></font>
<b>      </b><b>if</b><b> </b><b>(</b><b> </b>FCDataUygula<b> </b><b>=</b><b> </b>1<b> </b><b>)</b><b> </b><b>then</b>
<b>      </b><b>begin</b>
<b>        </b>UrunAdi<b>           </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UrunAdi<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>Lot<b>               </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>Lot<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>        </b>UretimPartiNo<b>     </b><b>=</b><b> </b>'&lt;![CDATA['<b> </b><b>|</b><b>|</b><b> </b>UretimPartiNo<b> </b><b>|</b><b>|</b><b> </b>']]&gt;'<b> </b><b>;</b>
<b>      </b><b>end</b>

<b>      </b><b>suspend</b><b>;</b>
<b>    </b><b>end</b>
<b>  </b><b>end</b>
<b>  </b><b>else</b><b> </b><b>if</b><b> </b><b>(</b>ModulID<b> </b><b>=</b><b> </b>7<b>)</b><b> </b><b>then</b><b> </b><font color="# 0 0FF"><i>--&gt; Ham Stok İrsaliye Detay</i></font>
<b>  </b><b>begin</b>
<b>    </b><b>For</b><b> </b><b>Select</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>HamStokMasterId<b>,</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>Miktar<b>,</b><font color="# 080 0"><u>Ham</u></font><b>.</b>SatisTransferKodu<b> </b><b>from</b><b> </b><font color="# 080 0"><u>HamStokIrsaliye</u></font>
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>HamStokIrsaliyeId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>HamStokIrsaliye</u></font><b>.</b>HamStokIrsaliyeId
<b>    </b><b>left</b><b> </b><b>join</b><b> </b><font color="# 080 0"><u>Ham</u></font><b> </b><b>on</b><b> </b><font color="# 080 0"><u>Ham</u></font><b>.</b>HamId<b> </b><b>=</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>HamId
<b>    </b><b>where</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>HamStokMasterId<b> </b><b>is</b><b> </b><b>not</b><b> </b><b>null</b><b> </b><b>and</b><b> </b><font color="# 080 0"><u>HamStokMaster</u></font><b>.</b>HamStokMasterId<b> </b><b>=</b><b> </b>:aEIrsaliyeID
<b>    </b><b>into</b><b> </b>:IrsaliyeDetayID<b>,</b><b> </b>:Miktar<b>,</b><b> </b>:SatisTransferKodu<b> </b><b>do</b>
<b>    </b><b>begin</b>
<b>      </b><b>suspend</b><b>;</b>
<b>    </b><b>end</b>
<b>  </b><b>end</b>
<b>end</b>

</pre></code>
</span></P>
<P CLASS="Base">&nbsp;</P>
<DIV CLASS="footer"><BR><HR></DIV>
  <TABLE BORDER="0" CELLPADDING="0" CELLSPACING="0" WIDTH=100%>
    <TR VALIGN="middle">
      <TD>&nbsp;&nbsp;&nbsp;&nbsp;</TD>
      <TD ALIGN="left" WIDTH="54px" NOWRAP>
        <A HREF="EIRSALIYEENTICINIRSALIYEGETIR.html"><IMG ALT="Previous topic" SRC="../Images/GoPrev.gif" BORDER="0"></A>
        <A HREF="../Index.html"><IMG ALT="Chapter index" SRC="../Images/GoIndex.gif" BORDER="0"></A>
        <A HREF="ELIARARIZABAKIMKAYDET.html"><IMG ALT="Next topic" SRC="../Images/GoNext.gif" BORDER="0"></A>
      </TD>
    </TR>
  </TABLE>
<P CLASS="Base">&nbsp;</P>
</BODY></HTML>